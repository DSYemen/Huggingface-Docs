# ูุนุงููุฑ ุงูุฃุฏุงุก

ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ููููุฉ ุฅุฌุฑุงุก ูุนุงููุฑ ุงูุฃุฏุงุก ูููุงุฐุฌ Transformers ุงูุฎุงุตุฉ ุจู Hugging Faceุ ูุฃูุถู ุงูููุงุฑุณุงุชุ ูุงููุนุงููุฑ ุงููุชุงุญุฉ ุจุงููุนู.

ูููู ุงูุนุซูุฑ ุนูู ุฏูุชุฑ ููุงุญุธุงุช ูุดุฑุญ ุจุงูุชูุตูู ููููุฉ ุฅุฌุฑุงุก ูุนุงููุฑ ุงูุฃุฏุงุก ูููุงุฐุฌ Hugging Face Transformers [ููุง](https://github.com/huggingface/notebooks/tree/main/examples/benchmark.ipynb).ุจุงูุชุฃููุฏุ ุณุฃููู ุจุชุฑุฌูุฉ ุงููุต ุงูููุฌูุฏ ูู ุงูููุฑุงุช ูุงูุนูุงููู ููุท ููุง ุทูุจุช.

## ููููุฉ ุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก Benchmark ูููุงุฐุฌ ๐ค Transformers

ุชุณูุญ ุงููุฆุชุงู [`PyTorchBenchmark`] ู [`TensorFlowBenchmark`] ุจุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ุฃุฏุงุก ูุฑู ูููุงุฐุฌ ๐ค Transformers. ูุชุชูุญ ููุง ูุฆุงุช ุงูุงุฎุชุจุงุฑ ููุงุณ _ุงูุงุณุชุฎุฏุงู ุงูุฃูุตู ููุฐุงูุฑุฉ_ ู _ุงูููุช ุงููุงุฒู_ ููู ูู _ุงูุงุณุชุฏูุงู_ ู _ุงูุชุฏุฑูุจ_.

<Tip>
ููุงุ ูุชู ุชุนุฑูู _ุงูุงุณุชุฏูุงู_ ุนูู ุฃูู ุนูููุฉ ุชูุฑูุฑ ุฅูู ุงูุฃูุงู ูุงุญุฏุฉุ ููุชู ุชุนุฑูู _ุงูุชุฏุฑูุจ_ ุนูู ุฃูู ุนูููุฉ ุชูุฑูุฑ ุฅูู ุงูุฃูุงู ูุงูุฎูู.
</Tip>

ุชุชููุน ูุฆุงุช ุงูุงุฎุชุจุงุฑ [`PyTorchBenchmark`] ู [`TensorFlowBenchmark`] ูุฌูุฏ ูุงุฆู ูู ุงูููุน [`PyTorchBenchmarkArguments`] ู [`TensorFlowBenchmarkArguments`]ุ ุนูู ุงูุชูุงููุ ูู ุฃุฌู ุฅูุดุงุก ูุซูู. [`PyTorchBenchmarkArguments`] ู [`TensorFlowBenchmarkArguments`] ููุง ูุฆุชุงู ููุจูุงูุงุช ูุชุญุชููุงู ุนูู ุฌููุน ุงูุชููุฆุงุช ุฐุงุช ุงูุตูุฉ ููุฆุฉ ุงูุงุฎุชุจุงุฑ ุงูููุงุจูุฉ. ูู ุงููุซุงู ุงูุชุงููุ ูุชู ุชูุถูุญ ููููุฉ ุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ุฃุฏุงุก ููููุฐุฌ BERT ูู ุงูููุน _bert-base-cased_.

ูุชู ุฅุนุทุงุก ุซูุงุซุฉ ูุณุงุฆุท ุฅูู ูุฆุงุช ุจูุงูุงุช ูุณุงุฆุท ุงูุงุฎุชุจุงุฑุ ููู `models` ู`batch_sizes` ู`sequence_lengths`. ุงููุณูุท `models` ูุทููุจ ููุชููุน ูุงุฆูุฉ ูู ูุญุฏุฏุงุช ูููุฉ ุงูููุงุฐุฌ ูู [ูุฑูุฒ ุงูููุงุฐุฌ](https://huggingface.co/models) ุชุญุฏุฏ ูุณุงุฆุท ุงููุงุฆูุฉ `batch_sizes` ู `sequence_lengths` ุญุฌู `input_ids` ุงูุฐู ูุชู ุงุฎุชุจุงุฑ ุงููููุฐุฌ ุนููู. ููุงู ุงูุนุฏูุฏ ูู ุงููุนููุงุช ุงูุฃุฎุฑู ุงูุชู ูููู ุชููุฆุชูุง ุนุจุฑ ูุฆุงุช ุจูุงูุงุช ูุณุงุฆุท ุงูุงุฎุชุจุงุฑ. ููุฒูุฏ ูู ุงูุชูุงุตูู ุญูู ูุฐู ุงููุนููุงุชุ ููููู ุฅูุง ุงูุฑุฌูุน ูุจุงุดุฑุฉ ุฅูู ุงููููุงุช `src/transformers/benchmark/benchmark_args_utils.py`ุ `src/transformers/benchmark/benchmark_args.py` (ูู PyTorch) ู `src/transformers/benchmark/benchmark_args_tf.py` (ูู Tensorflow). ุฃูุ ููููู ุชุดุบูู ุฃูุงูุฑ Shell ุงูุชุงููุฉ ูู ุงูุฌุฐุฑุ ูุงูุชู ุณุชุทุจุน ูุงุฆูุฉ ูุตููุฉ ุจุฌููุน ุงููุนููุงุช ุงูุชู ูููู ุชููุฆุชูุง ูู PyTorch ู Tensorflow ุนูู ุงูุชูุงูู.

ูููู ุจุจุณุงุทุฉ ุชุดุบูู ูุงุฆู ุงูุงุฎุชุจุงุฑ ุงูุฐู ุชู ุฅูุดุงุคู ุนู ุทุฑูู ุงุณุชุฏุนุงุก `benchmark.run()`.

ุจุดูู ุงูุชุฑุงุถูุ ูุชู ุงุฎุชุจุงุฑ _ุงูููุช_ ู _ุงูุฐุงูุฑุฉ ุงููุทููุจุฉ_ ูู _ุงูุงุณุชุฏูุงู_. ูู ูุซุงู ุงูุฅุฎุฑุงุฌ ุฃุนูุงูุ ูุนุฑุถ ุงููุณูุงู ุงูุฃููุงู ุงููุชูุฌุฉ ุงูููุงุจูุฉ ูู _ููุช ุงูุงุณุชุฏูุงู_ ู _ุฐุงูุฑุฉ ุงูุงุณุชุฏูุงู_. ุจุงูุฅุถุงูุฉ ุฅูู ุฐููุ ูุชู ุทุจุงุนุฉ ุฌููุน ุงููุนูููุงุช ุฐุงุช ุงูุตูุฉ ุญูู ุจูุฆุฉ ุงูุญูุณุจุฉุ ูุซู ููุน GPUุ ูุงููุธุงูุ ูุฅุตุฏุงุฑุงุช ุงูููุชุจุงุชุ ููุง ุฅูู ุฐููุ ูู ุงููุณู ุงูุซุงูุซ ุชุญุช _ูุนูููุงุช ุงูุจูุฆุฉ_. ูููู ุญูุธ ูุฐู ุงููุนูููุงุช ุจุดูู ุงุฎุชูุงุฑู ูู ููู _.csv_ ุนูุฏ ุฅุถุงูุฉ ูุณูุท `save_to_csv=True` ุฅูู [`PyTorchBenchmarkArguments`] ู [`TensorFlowBenchmarkArguments`] ุนูู ุงูุชูุงูู. ูู ูุฐู ุงูุญุงูุฉุ ูุชู ุญูุธ ูู ูุณู ูู ููู _.csv_ ูููุตู. ูููู ุงุฎุชูุงุฑูุงู ุชุญุฏูุฏ ูุณุงุฑ ูู ููู _.csv_ ุนุจุฑ ูุฆุงุช ุจูุงูุงุช ูุณุงุฆุท ุงูุงุฎุชุจุงุฑ.

ุจุฏูุงู ูู ุงุฎุชุจุงุฑ ุงูููุงุฐุฌ ุงููุฏุฑุจุฉ ูุณุจููุง ุนุจุฑ ูุญุฏุฏ ูููุชูุงุ ูุซู `google-bert/bert-base-uncased`ุ ูููู ูููุณุชุฎุฏู ุจุฏูุงู ูู ุฐูู ุงุฎุชุจุงุฑ ุชููุฆุฉ ุนุดูุงุฆูุฉ ูุฃู ูุฆุฉ ูููุฐุฌ ูุชุงุญุฉ. ูู ูุฐู ุงูุญุงูุฉุ ูุฌุจ ุฅุฏุฎุงู ูุงุฆูุฉ ูู ุงูุชููุฆุงุช ูุน ูุณุงุฆุท ุงูุงุฎุชุจุงุฑ ููุง ููู.

ูุฑุฉ ุฃุฎุฑูุ ูุชู ููุงุณ _ููุช ุงูุงุณุชุฏูุงู_ ู _ุงูุฐุงูุฑุฉ ุงููุทููุจุฉ_ ูู _ุงูุงุณุชุฏูุงู_ุ ูููู ูุฐู ุงููุฑุฉ ูุชููุฆุงุช ูุฎุตุตุฉ ููุฆุฉ `BertModel`. ูููู ุฃู ุชููู ูุฐู ุงูููุฒุฉ ูููุฏุฉ ุจุดูู ุฎุงุต ุนูุฏ ุงุชุฎุงุฐ ุงููุฑุงุฑ ุจุดุฃู ุงูุชููุฆุฉ ุงูุชู ูุฌุจ ุชุฏุฑูุจ ุงููููุฐุฌ ุนูููุง.## ุฃูุถู ุงูููุงุฑุณุงุช ูู ุงูุงุฎุชุจุงุฑ ุงูููุงุณู

ูุฐูุฑ ูุฐุง ุงููุณู ุจุนุถ ุฃูุถู ุงูููุงุฑุณุงุช ุงูุชู ูุฌุจ ูุฑุงุนุงุชูุง ุนูุฏ ุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ููุงุณู ููููุฐุฌ ูุง.

- ูู ุงูููุช ุงูุญุงููุ ูุง ูุชู ุฏุนู ุณูู ุงูุงุฎุชุจุงุฑ ุงูููุงุณู ุนูู ุฌูุงุฒ ูุงุญุฏ. ูุนูุฏ ุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑ ุนูู ูุญุฏุฉ ูุนุงูุฌุฉ ุงูุฑุณูููุงุช (GPU)ุ ููุตู ุจุฃู ูุญุฏุฏ ุงููุณุชุฎุฏู ุงูุฌูุงุฒ ุงูุฐู ูุฌุจ ุชุดุบูู ุงูููุฏ ุนููู ูู ุฎูุงู ุถุจุท ูุชุบูุฑ ุงูุจูุฆุฉ `CUDA_VISIBLE_DEVICES` ูู ุงููุญุซุ ุนูู ุณุจูู ุงููุซุงูุ `export CUDA_VISIBLE_DEVICES=0` ูุจู ุชุดุบูู ุงูููุฏ.

- ูุฌุจ ุชุนููู ุงูุฎูุงุฑ `no_multi_processing` ุนูู ุงููููุฉ `True` ููุท ูุฃุบุฑุงุถ ุงูุงุฎุชุจุงุฑ ูุงูุชุตุญูุญ. ููุถูุงู ุฏูุฉ ููุงุณ ุงูุฐุงูุฑุฉุ ููุตู ุจุชุดุบูู ูู ุงุฎุชุจุงุฑ ููุงุณู ููุฐุงูุฑุฉ ูู ุนูููุฉ ูููุตูุฉ ูู ุฎูุงู ุงูุชุฃูุฏ ูู ุชุนููู `no_multi_processing` ุนูู ุงููููุฉ `True`.

- ูุฌุจ ุฏุงุฆููุง ุฐูุฑ ูุนูููุงุช ุงูุจูุฆุฉ ุนูุฏ ูุดุงุฑูุฉ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงูููุงุณู ููููุฐุฌ ูุง. ููููู ุฃู ุชุฎุชูู ุงููุชุงุฆุฌ ุงุฎุชูุงููุง ูุจูุฑูุง ุจูู ุฃุฌูุฒุฉ GPU ุงููุฎุชููุฉุ ูุฅุตุฏุงุฑุงุช ุงูููุชุจุงุชุ ููุง ุฅูู ุฐููุ ูุฐูู ูุฅู ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงูููุงุณู ุจููุฑุฏูุง ููุณุช ูููุฏุฉ ููุบุงูุฉ ูููุฌุชูุน.

## ูุดุงุฑูุฉ ุงูุงุฎุชุจุงุฑ ุงูููุงุณู ุงูุฎุงุต ุจู

ุณุจู ุงุฎุชุจุงุฑ ุฌููุน ุงูููุงุฐุฌ ุงูุฃุณุงุณูุฉ ุงููุชุงุญุฉ (10 ูู ุฐูู ุงูููุช) ูู ุญูุซ _ููุช ุงูุงุณุชุฏูุงู_ุ ุนุจุฑ ุงูุนุฏูุฏ ูู ุงูุฅุนุฏุงุฏุงุช ุงููุฎุชููุฉ: ุจุงุณุชุฎุฏุงู PyTorchุ ูุน TorchScript ูุจุฏูููุ ุจุงุณุชุฎุฏุงู TensorFlowุ ูุน XLA ูุจุฏููู. ูุชู ุฅุฌุฑุงุก ุฌููุน ูุฐู ุงูุงุฎุชุจุงุฑุงุช ุนุจุฑ ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (CPUs) (ุจุงุณุชุซูุงุก TensorFlow XLA) ููุญุฏุงุช ูุนุงูุฌุฉ ุงูุฑุณูููุงุช (GPUs).

ููุชู ุดุฑุญ ูุฐุง ุงูููุฌ ุจุงูุชูุตูู ูู [ููุดูุฑ ุงููุฏููุฉ ุงูุชุงูู](https://medium.com/huggingface/benchmarking-transformers-pytorch-and-tensorflow-e2917fb891c2) ูุชุชููุฑ ุงููุชุงุฆุฌ [ููุง](https://docs.google.com/spreadsheets/d/1sryqufw2D0XlUH4sq3e9Wnxu5EAQkaohzrJbd5HdQ_w/edit?usp=sharing).

ูุน ุฃุฏูุงุช ุงูุงุฎุชุจุงุฑ ุงูููุงุณู ุงูุฌุฏูุฏุฉุ ุฃุตุจุญ ูู ุงูุณูู ุฃูุซุฑ ูู ุฃู ููุช ูุถู ูุดุงุฑูุฉ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงูููุงุณู ุงูุฎุงุต ุจู ูุน ุงููุฌุชูุน

- [ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงูููุงุณู ูู PyTorch](https://github.com/huggingface/transformers/tree/main/examples/pytorch/benchmarking/README.md).

- [ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงูููุงุณู ูู TensorFlow](https://github.com/huggingface/transformers/tree/main/examples/tensorflow/benchmarking/README.md).