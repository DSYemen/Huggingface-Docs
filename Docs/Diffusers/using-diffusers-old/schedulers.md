بالتأكيد، سأقوم بترجمة النص الموجود في الفقرات والعناوين مع مراعاة التعليمات التي قدمتها.

# تحميل الجداول الزمنية والنماذج

تمثل أنابيب الانتشار مجموعة من الجداول الزمنية والنماذج القابلة للتبديل التي يمكن مزجها وتناسبها لتخصيص خط أنابيب لحالة استخدام معينة. يغلف الجدول الزمني عملية إزالة التشويش بأكملها، مثل عدد خطوات إزالة التشويش والخوارزمية للعثور على العينة الخالية من التشويش. لا يتم معلم الجدول الزمني أو تدريبه، لذلك لا يستغرقون الكثير من الذاكرة. عادة ما يهتم النموذج بمرور الإرسال من إدخال مشوش إلى عينة أقل تشويشًا.

سيوضح هذا الدليل كيفية تحميل الجداول الزمنية والنماذج لتخصيص خط أنابيب. ستستخدم نقطة التحقق [runwayml/stable-diffusion-v1-5] طوال هذا الدليل، لذا دعنا نقوم بتحميله أولاً.

يمكنك معرفة الجدول الزمني الذي يستخدمه هذا الخط أنابيب مع سمة `pipeline.scheduler`.

## تحميل جدول زمني

يتم تحديد الجداول الزمنية بواسطة ملف تكوين يمكن استخدامه بواسطة مجموعة متنوعة من الجداول الزمنية. قم بتحميل جدول زمني باستخدام طريقة [`SchedulerMixin.from_pretrained`]، وحدد معلمة `subfolder` لتحميل ملف التكوين في المجلد الفرعي الصحيح لمستودع خط الأنابيب.

على سبيل المثال، لتحميل [`DDIMScheduler`]:

ثم يمكنك تمرير الجدول الزمني المحمل حديثًا إلى خط الأنابيب.

## مقارنة الجداول الزمنية

تتمتع الجداول الزمنية بمزايا وعيوب فريدة، مما يجعل من الصعب المقارنة الكمية بين الجدول الزمني الذي يعمل بشكل أفضل لخط الأنابيب. عادة ما يتعين عليك إجراء مبادلة بين سرعة إزالة التشويش وجودة إزالة التشويش. نوصي بتجربة جداول زمنية مختلفة للعثور على جدول زمني يعمل بشكل أفضل لحالتك الاستخدام. اتصل بسمة `pipeline.scheduler.compatibles` لمعرفة الجداول الزمنية المتوافقة مع خط الأنابيب.

دعونا نقارن [`LMSDiscreteScheduler`]، [`EulerDiscreteScheduler`]، [`EulerAncestralDiscreteScheduler`]، و [`DPMSolverMultistepScheduler`] على الفور والصورة التالية.

لتغيير جدول أنابيب الجدول الزمني، استخدم طريقة [`~ConfigMixin.from_config`] لتحميل تكوين جدول زمني مختلف `pipeline.scheduler.config` في خط الأنابيب.

<hfoptions id="schedulers">

<hfoption id="LMSDiscreteScheduler">

عادةً ما ينشئ [`LMSDiscreteScheduler`] صورًا ذات جودة أعلى من الجدول الزمني الافتراضي.

</hfoption>

<hfoption id="EulerDiscreteScheduler">

يمكن لـ [`EulerDiscreteScheduler`] إنشاء صور ذات جودة أعلى في 30 خطوة فقط.

</hfoption>

<hfoption id="EulerAncestralDiscreteScheduler">

يمكن لـ [`EulerAncestralDiscreteScheduler`] إنشاء صور ذات جودة أعلى في 30 خطوة فقط.

</hfoption>

<hfoption id="DPMSolverMultistepScheduler">

يوفر [`DPMSolverMultistepScheduler`] توازنًا بين السرعة والجودة ويمكنه إنشاء صور ذات جودة أعلى في 20 خطوة فقط.

</hfoption>

</hfoptions>

معظم الصور تبدو متشابهة للغاية ومقارنة من حيث الجودة. مرة أخرى، غالبًا ما يتعلق الأمر بحالة الاستخدام المحددة، لذا فإن أحد الأساليب الجيدة هو تشغيل جداول زمنية مختلفة ومقارنة النتائج.

### جداول زمنية Flax

لمقارنة جداول زمنية Flax، يلزمك أيضًا تحميل حالة الجدول الزمني في معلمات النموذج. على سبيل المثال، دعنا نغير الجدول الزمني الافتراضي في [`FlaxStableDiffusionPipeline`] لاستخدام الجدول الزمني فائق السرعة [`FlaxDPMSolverMultistepScheduler`].

> [!تحذير]
> [`FlaxLMSDiscreteScheduler`] و [`FlaxDDPMScheduler`] غير متوافقين مع [`FlaxStableDiffusionPipeline`] بعد.

ثم يمكنك الاستفادة من توافق Flax مع TPUs لإنشاء عدد من الصور بالتوازي. ستحتاج إلى إجراء نسخة من معلمات النموذج لكل جهاز متاح ثم تقسيم الإدخالات عبرها لإنشاء العدد المطلوب من الصور.

# النماذج

يتم تحميل النماذج من طريقة [`ModelMixin.from_pretrained`]، والتي تقوم بتنزيل وتخزين أحدث إصدار من أوزان النموذج والتكوينات. إذا كانت أحدث الملفات متاحة في ذاكرة التخزين المؤقت المحلية، فإن [`~ModelMixin.from_pretrained`] يعيد استخدام الملفات الموجودة في الذاكرة بدلاً من إعادة تنزيلها.

يمكن تحميل النماذج من مجلد فرعي باستخدام حجة `subfolder`. على سبيل المثال، يتم تخزين أوزان النموذج لـ [runwayml/stable-diffusion-v1-5] في المجلد الفرعي [unet].

يمكن أيضًا تحميلها مباشرة من [مستودع](https://huggingface.co/google/ddpm-cifar10-32/tree/main).

لتحميل وحفظ متغيرات النموذج، حدد حجة `variant` في [`ModelMixin.from_pretrained`] و [`ModelMixin.save_pretrained`].