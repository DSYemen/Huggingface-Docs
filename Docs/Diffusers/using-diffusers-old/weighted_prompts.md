# ุชูููุงุช ุงูุชุญููุฒ 

ุชุนุฏ ุงููุญูุฒุงุช ูููุฉ ูุฃููุง ุชุตู ูุง ุชุฑูุฏ ูู ูููุฐุฌ ุงูุงูุชุดุงุฑ ุชูููุฏู. ุฃูุถู ุงููุญูุฒุงุช ูู ุชูู ุงูููุตูุฉ ูุงููุญุฏุฏุฉ ูุงูููุจููุฉ ุจุดูู ุฌูุฏ ููุณุงุนุฏุฉ ุงููููุฐุฌ ุนูู ุชุญููู ุฑุคูุชู. ูููู ุตูุงุบุฉ ูุญูุฒ ุฑุงุฆุน ูุณุชุบุฑู ููุชูุง ูุฌูุฏูุงุ ููู ุจุนุถ ุงูุฃุญูุงู ูุฏ ูุง ูููู ุฐูู ูุงูููุง ูุฃู ุงููุบุฉ ูุงููููุงุช ูุฏ ูุง ุชููู ุฏูููุฉ. ููุง ุชุญุชุงุฌ ุฅูู ุชุนุฒูุฒ ูุญูุฒู ุจุชูููุงุช ุฃุฎุฑูุ ูุซู ุชุญุณูู ุงููุญูุฒุงุช ููุฒู ุงููุญูุฒุงุชุ ููุญุตูู ุนูู ุงููุชุงุฆุฌ ุงููุฑุฌูุฉ.

ุณููุถุญ ูุฐุง ุงูุฏููู ููููุฉ ุงุณุชุฎุฏุงู ุชูููุงุช ุงููุญูุฒุงุช ูุฐู ูุชูููุฏ ุตูุฑ ุนุงููุฉ ุงูุฌูุฏุฉ ุจูุฌููุฏ ุฃูู ูุชุนุฏูู ูุฒู ูููุงุช ุฑุฆูุณูุฉ ูุนููุฉ ูู ุงููุญูุฒ.

## ููุฏุณุฉ ุงููุญูุฒุงุช

> [!TIP]
> ูุฐุง ููุณ ุฏููููุง ุดุงูููุง ุนู ููุฏุณุฉ ุงููุญูุฒุงุชุ ููููู ุณูุณุงุนุฏู ุนูู ููู ุงูุฃุฌุฒุงุก ุงูุถุฑูุฑูุฉ ููุญูุฒ ุฌูุฏ. ูุดุฌุนู ุนูู ุงูุงุณุชูุฑุงุฑ ูู ุชุฌุฑุจุฉ ูุญูุฒุงุช ูุฎุชููุฉ ูุฏูุฌูุง ุจุทุฑู ุฌุฏูุฏุฉ ููุนุฑูุฉ ูุง ููุงุณุจู. ูููุง ูุชุจุช ูุญูุฒุงุช ุฃูุซุฑุ ุณุชุทูุฑ ุญุฏุณูุง ููุง ููุฌุญ ููุง ูุง ููุฌุญ!

ุชุคุฏู ููุงุฐุฌ ุงูุงูุชุดุงุฑ ุงูุฌุฏูุฏุฉ ูุธููุชูุง ุจุดูู ุฌูุฏ ุฅูู ุญุฏ ูุง ูู ุชูููุฏ ุตูุฑ ุนุงููุฉ ุงูุฌูุฏุฉ ูู ูุญูุฒ ุฃุณุงุณูุ ูููู ูุง ูุฒุงู ูู ุงูููู ุฅูุดุงุก ูุญูุฒ ููุชูุจ ุจุดูู ุฌูุฏ ููุญุตูู ุนูู ุฃูุถู ุงููุชุงุฆุฌ. ูููุง ููู ุจุนุถ ุงููุตุงุฆุญ ููุชุงุจุฉ ูุญูุฒ ุฌูุฏ:

1. ูุง ูู ูุณูุทุฉ ุงูุตูุฑุฉุ ูู ูู ุตูุฑุฉ ููุชูุบุฑุงููุฉุ ุฃู ููุญุฉ ุฒูุชูุฉุ ุฃู ุชูุถูุญ ุซูุงุซู ุงูุฃุจุนุงุฏุ ุฃู ุดูุก ุขุฎุฑุ
2. ูุง ูู ููุถูุน ุงูุตูุฑุฉุ ูู ูู ุดุฎุตุ ุฃู ุญููุงูุ ุฃู ูุงุฆูุ ุฃู ููุธุฑุ
3. ูุง ูู ุงูุชูุงุตูู ุงูุชู ุชุฑูุฏ ุฑุคูุชูุง ูู ุงูุตูุฑุฉุ ููุง ููููู ุฃู ุชููู ูุจุฏุนูุง ุญููุง ูุงูุงุณุชูุชุงุน ุจุชุฌุฑุจุฉ ูููุงุช ูุฎุชููุฉ ูุฅุถูุงุก ุงูุญูุงุฉ ุนูู ุตูุฑุชู. ุนูู ุณุจูู ุงููุซุงูุ ูุง ูู ุงูุฅุถุงุกุฉุ ูุง ูู ุงูุญุงูุฉ ุงููุฒุงุฌูุฉ ูุงูุฌูุงููุฉุ ูุง ูู ุฃุณููุจ ุงููู ุฃู ุงูุชูุถูุญ ุงูุฐู ุชุจุญุซ ุนููุ ูููุง ูุงูุช ุงููููุงุช ุงูุชู ุชุณุชุฎุฏููุง ุฃูุซุฑ ุชุญุฏูุฏูุง ูุฏูุฉุ ูุงู ููู ุงููููุฐุฌ ููุง ุชุฑูุฏ ุชูููุฏู ุฃูุถู.

<div class="flex gap-4">
<div>
<img class="rounded-xl" src="https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/diffusers/plain-prompt.png"/>
<figcaption class="mt-2 text-center text-sm text-gray-500">"ุตูุฑุฉ ุฃุฑููุฉ ุนูู ุดูู ููุฒ ูู ุบุฑูุฉ ุงููุนูุดุฉ"</figcaption>
</div>
<div>
<img class="rounded-xl" src="https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/diffusers/detail-prompt.png"/>
<figcaption class="mt-2 text-center text-sm text-gray-500">"ุฃุฑููุฉ ุนูู ุดูู ููุฒ ุฐุงุช ููู ุฃุตูุฑ ุฒุงูู ุชุณุชูุฑ ูู ุบุฑูุฉ ูุนูุดุฉ ูุฑูุญุฉุ ููุญุชูู ุงูุญูุงุกูุง ุนูู ูุฌููุนุฉ ูู ุงููุณุงุฆุฏ ุงูููููุฉ. ูุนูู ุงูุฃุฑุถูุฉ ุงูุฎุดุจูุฉุ ุชุถูู ุณุฌุงุฏุฉ ุฐุงุช ูููุด ููุณุฉ ูู ุงูุณุญุฑ ุงูุฅููููุชูููุ ูุชูู ูุจุชุฉ ูู ูุนุงุก ูู ุงูุฒุงููุฉุ ููุชุฏุฉ ูุญู ุฃุดุนุฉ ุงูุดูุณ ุงูุชู ุชุชุณูู ูู ุงูููุงูุฐ"</figcaption>
</div>
</div>
ุชุญุณูู ุงูููุงุตู ุงูุฒูููุฉ ุจุงุณุชุฎุฏุงู GPT2

ุชุญุณูู ุงูููุงุตู ุงูุฒูููุฉ ูู ุชูููุฉ ูุชุญุณูู ุฌูุฏุฉ ุงูููุงุตู ุงูุฒูููุฉ ุจุณุฑุนุฉ ุฏูู ุจุฐู ุงููุซูุฑ ูู ุงูุฌูุฏ ูู ุจูุงุฆูุง. ูุณุชุฎุฏู ุฃุณููุจูุง ูุซู GPT2 ุงูุฐู ุชู ุชุฏุฑูุจู ูุณุจููุง ุนูู ููุงุตู Stable Diffusion ุงููุตูุฉ ูุชุญุณูู ุงูููุงุตู ุงูุฒูููุฉ ุชููุงุฆููุง ุจุงุณุชุฎุฏุงู ูููุงุช ุฑุฆูุณูุฉ ุฅุถุงููุฉ ูููุฉ ูุฅูุดุงุก ุตูุฑ ุนุงููุฉ ุงูุฌูุฏุฉ.

ุชุนูู ุงูุชูููุฉ ุนู ุทุฑูู ุฅูุดุงุก ูุงุฆูุฉ ุจูููุงุช ุฑุฆูุณูุฉ ูุญุฏุฏุฉ ูุฅุฌุจุงุฑ ุงููููุฐุฌ ุนูู ุชูููุฏ ุชูู ุงููููุงุช ูุชุนุฒูุฒ ุงููุงุตู ุงูุฒููู ุงูุฃุตูู. ุจูุฐู ุงูุทุฑููุฉุ ูููู ุฃู ูููู ูุงุตู ุงูููุช ุงูุฎุงุต ุจู "ูุทุฉ" ููููู ูู GPT2 ุชุญุณูู ุงููุงุตู ุงูุฒููู ุฅูู "ููุทุฉ ูููู ุณูููุงุฆู ููุทุฉ ููุทุฉ ุชุณุชูุชุน ุจุฃุดุนุฉ ุงูุดูุณ ุนูู ุณุทุญ ูู ุชุฑููุงุ ููุตูุฉ ููุบุงูุฉุ ูููุฒุงููุฉ ุฅูุชุงุฌ ุนุงููุฉุ ููููู ููููููุฏุ ูุดุงุดุฉ ุณูููุงุฆูุฉุ ููุฒุงุฌูุฉุ ูููุญููุฉุ ูุฌูููุฉุ ูุญุจูุจุงุช ูููู ุญุงุฏุฉ ุงูุชุฑููุฒ ุฌูููุฉ ููุตูุฉ ูุนูุฏุฉ ูุฐููุฉ ููุญููุฉ".

ูุตูุญุฉ: ูุฌุจ ุนููู ุฃูุถูุง ุงุณุชุฎุฏุงู LORA ุถูุถุงุก ุงูุชุนููุถ ูุชุญุณูู ุงูุชุจุงูู ูู ุงูุตูุฑ ุงูุณุงุทุนุฉ ูุงููุธููุฉ ูุฎูู ุฅุถุงุกุฉ ุฃูุถู ุจุดูู ุนุงู. ูุชุงุญ ูู [stabilityai/stable-diffusion-xl-base-1.0](https://hf.co/stabilityai/stable-diffusion-xl-base-1.0).

ุงุจุฏุฃ ุจุชุญุฏูุฏ ุจุนุถ ุงูุฃุณุงููุจ ููุงุฆูุฉ ุจุงููููุงุช (ููููู ุงูุงุทูุงุน ุนูู ูุงุฆูุฉ ุฃูุซุฑ ุดูููุงู [ุจุงููููุงุช](https://hf.co/LykosAI/GPT-Prompt-Expansion-Fooocus-v2/blob/main/positive.txt) ู [ุงูุฃุณุงููุจ](https://github.com/lllyasviel/Fooocus/tree/main/sdxl_styles) ุงูุชู ูุณุชุฎุฏููุง Fooocus) ูุชุญุณูู ูุงุตู ูุนูู.

ุชุนุฑูู ุจุนุถ ุงูุฃุณุงููุจ ููุงุฆูุฉ ุงููููุงุช:

```py
styles = {
"cinematic": "cinematic film still of {prompt}, highly detailed, high budget hollywood movie, cinemascope, moody, epic, gorgeous, film grain",
"anime": "anime artwork of {prompt}, anime style, key visual, vibrant, studio anime, highly detailed",
"photographic": "cinematic photo of {prompt}, 35mm photograph, film, professional, 4k, highly detailed",
"comic": "comic of {prompt}, graphic illustration, comic art, graphic novel art, vibrant, highly detailed",
"lineart": "line art drawing {prompt}, professional, sleek, modern, minimalist, graphic, line art, vector graphics",
"pixelart": " pixel-art {prompt}, low-res, blocky, pixel art style, 8-bit graphics",
}

words = [
"aesthetic", "astonishing", "beautiful", "breathtaking", "composition", "contrasted", "epic", "moody", "enhanced",
"exceptional", "fascinating", "flawless", "glamorous", "glorious", "illumination", "impressive", "improved",
"inspirational", "magnificent", "majestic", "hyperrealistic", "smooth", "sharp", "focus", "stunning", "detailed",
"intricate", "dramatic", "high", "quality", "perfect", "light", "ultra", "highly", "radiant", "satisfying",
"soothing", "sophisticated", "stylish", "sublime", "terrific", "touching", "timeless", "wonderful", "unbelievable",
"elegant", "awesome", "amazing", "dynamic", "trendy",
]
```

ูุฏ ุชูุงุญุธ ูู ูุงุฆูุฉ `words`ุ ุฃู ููุงู ูููุงุช ูุนููุฉ ูููู ุงูุชุฑุงููุง ูุฎูู ุดูุก ุฃูุซุฑ ูุนูู. ุนูู ุณุจูู ุงููุซุงูุ ูููู ุฏูุฌ ูููุชู "high" ู "quality" ูุชุตุจุญ "high quality". ุฏุนููุง ููุฑู ูุฐู ุงููููุงุช ูุนูุง ููุฒูู ุงููููุงุช ุงูุชู ูุง ูููู ุงูุชุฑุงููุง.

```py
word_pairs = ["highly detailed", "high quality", "enhanced quality", "perfect composition", "dynamic light"]

def find_and_order_pairs(s, pairs):
words = s.split()
found_pairs = []
for pair in pairs:
pair_words = pair.split()
if pair_words[0] in words and pair_words[1] in words:
found_pairs.append(pair)
words.remove(pair_words[0])
words.remove(pair_words[1])

for word in words[:]:
for pair in pairs:
if word in pair.split():
words.remove(word)
break
ordered_pairs = ", ".join(found_pairs)
remaining_s = ", ".join(words)
return ordered_pairs, remaining_s
```

ุจุนุฏ ุฐููุ ูู ุจุชูููุฐ ูุฆุฉ [`~transformers.LogitsProcessor` ูุฎุตุตุฉ] ุชููู ุจุชุนููู ุงูุฑููุฒ ูู ูุงุฆูุฉ `words` ุจูููุฉ 0 ูุชุนููู ุงูุฑููุฒ ุบูุฑ ุงูููุฌูุฏุฉ ูู ูุงุฆูุฉ `words` ุฅูู ูููุฉ ุณุงูุจุฉ ุญุชู ูุง ูุชู ุงุฎุชูุงุฑูุง ุฃุซูุงุก ุงูุชูููุฏ. ุจูุฐู ุงูุทุฑููุฉุ ูููู ุงูุชูููุฏ ูุชุญูุฒูุง ูุญู ุงููููุงุช ุงูููุฌูุฏุฉ ูู ูุงุฆูุฉ `words`. ุจุนุฏ ุงุณุชุฎุฏุงู ูููุฉ ูู ุงููุงุฆูุฉุ ูุชู ุฃูุถูุง ุชุนููููุง ุฅูู ูููุฉ ุณุงูุจุฉ ุญุชู ูุง ูุชู ุงุฎุชูุงุฑูุง ูุฑุฉ ุฃุฎุฑู.

```py
class CustomLogitsProcessor(LogitsProcessor):
def __init__(self, bias):
super().__init__()
self.bias = bias

def __call__(self, input_ids, scores):
if len(input_ids.shape) == 2:
last_token_id = input_ids[0, -1]
self.bias[last_token_id] = -1e10
return scores + self.bias

word_ids = [tokenizer.encode(word, add_prefix_space=True)[0] for word in words]
bias = torch.full((tokenizer.vocab_size,), -float("Inf")).to("cuda")
bias[word_ids] = 0
processor = CustomLogitsProcessor(bias)
processor_list = LogitsProcessorList([processor])
```

ูู ุจุฏูุฌ ุงููุงุตู ุงูุฒููู ูุฃุณููุจ "cinematic" ุงููุญุฏุฏ ูู ูุงููุณ `styles` ุณุงุจููุง.

```py
prompt = "a cat basking in the sun on a roof in Turkey"
style = "cinematic"

prompt = styles[style].format(prompt=prompt)
prompt
"cinematic film still of a cat basking in the sun on a roof in Turkey, highly detailed, high budget hollywood movie, cinemascope, moody, epic, gorgeous, film grain"
```

ูู ุจุชุญููู ุจุฑูุงูุฌ ุชุดููุฑ GPT2 ููููุฐุฌ ูู ููุทุฉ ุงูุชุญูู [Gustavosta/MagicPrompt-Stable-Diffusion](https://huggingface.co/Gustavosta/MagicPrompt-Stable-Diffusion) (ุชู ุชุฏุฑูุจ ููุทุฉ ุงูุชุญูู ูุฐู ุฎุตูุตูุง ูุชูููุฏ ุงูููุงุตู ุงูุฒูููุฉ) ูุชุญุณูู ุงููุงุตู ุงูุฒููู.

```py
tokenizer = GPT2Tokenizer.from_pretrained("Gustavosta/MagicPrompt-Stable-Diffusion")
model = GPT2LMHeadModel.from_pretrained("Gustavosta/MagicPrompt-Stable-Diffusion", torch_dtype=torch.float16).to(
"cuda"
)
model.eval()

inputs = tokenizer(prompt, return_tensors="pt").to("cuda")
token_count = inputs["input_ids"].shape[1]
max_new_tokens = 50 - token_count

generation_config = GenerationConfig(
penalty_alpha=0.7,
top_k=50,
eos_token_id=model.config.eos_token_idุ
pad_token_id=model.config.eos_token_idุ
pad_token=model.config.pad_token_idุ
do_sample=True,
)

with torch.no_grad():
generated_ids = model.generate(
input_ids=inputs["input_ids"],
attention_mask=inputs["attention_mask"],
max_new_tokens=max_new_tokens,
generation_config=generation_config,
logits_processor=proccesor_list,
)
```

ุจุนุฏ ุฐููุ ููููู ุฏูุฌ ุงููุงุตู ุงูุฒููู ุงููุฏุฎูุงุช ูุงููุงุตู ุงูุฒููู ุงููููุฏ. ูุง ุชุชุฑุฏุฏ ูู ุฅููุงุก ูุธุฑุฉ ุนูู ูุง ูู ุงููุงุตู ุงูุฒููู ุงููููุฏ (`generated_part`)ุ ูุฃุฒูุงุฌ ุงููููุงุช ุงูุชู ุชู ุงูุนุซูุฑ ุนูููุง (`pairs`)ุ ูุงููููุงุช ุงููุชุจููุฉ (`words`). ูู ูุฐุง ูุถูู ูู `enhanced_prompt`.

```py
output_tokens = [tokenizer.decode(generated_id, skip_special_tokens=True) for generated_id in generated_ids]
input_part, generated_part = output_tokens[0][: len(prompt)], output_tokens[0][len(prompt) :]
pairs, words = find_and_order_pairs(generated_part, word_pairs)
formatted_generated_part = pairs + ", " + words
enhanced_prompt = input_part + ", " + formatted_generated_part
enhanced_prompt
["cinematic film still of a cat basking in the sun on a roof in Turkey, highly detailed, high budget hollywood movie, cinemascope, moody, epic, gorgeous, film grain quality sharp focus beautiful detailed intricate stunning amazing epic"]
```

ุฃุฎูุฑูุงุ ูู ุจุชุญููู ุฎุท ุฃูุงุจูุจ ูLORA ุถูุถุงุก ุงูุชุนููุถ ุจูุฒู *ููุฎูุถ* ูุชูููุฏ ุตูุฑุฉ ุจุงุณุชุฎุฏุงู ุงููุงุตู ุงูุฒููู ุงููุญุณู.

```py
pipeline = StableDiffusionXLPipeline.from_pretrained(
"RunDiffusion/Juggernaut-XL-v9"ุ torch_dtype=torch.float16ุ variant="fp16"
).to("cuda")

pipeline.load_lora_weights(
"stabilityai/stable-diffusion-xl-base-1.0"ุ
weight_name="sd_xl_offset_example-lora_1.0.safetensors"ุ
adapter_name="offset"ุ
)
pipeline.set_adapters(["offset"], adapter_weights=[0.2])

image = pipeline(
enhanced_prompt,
width=1152,
height=896,
guidance_scale=7.5,
num_inference_steps=25,
).images[0]
image
```

ูููุง ููู ูุซุงู ุนูู ุตูุฑุฉ ุชู ุฅูุดุงุคูุง ุจุงุณุชุฎุฏุงู ุงููุงุตู ุงูุฒููู ุงููุญุณู:

![ุตูุฑุฉ ููุทุฉ ุชุณุชูุชุน ุจุฃุดุนุฉ ุงูุดูุณ ุนูู ุณุทุญ ูู ุชุฑููุงุ ูุน ุชูุงุตูู ุฏูููุฉ ูููุฒุงููุฉ ุฅูุชุงุฌ ุนุงููุฉ ูุฌูุฏุฉ ุตูุฑุฉ ุณูููุงุฆูุฉ](https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/diffusers/enhanced-prompt.png)

"ููุทุฉ ูููู ุณูููุงุฆู ููุทุฉ ููุทุฉ ุชุณุชูุชุน ุจุฃุดุนุฉ ุงูุดูุณ ุนูู ุณุทุญ ูู ุชุฑููุงุ ููุตูุฉ ููุบุงูุฉุ ูููุฒุงููุฉ ุฅูุชุงุฌ ุนุงููุฉุ ููููู ููููููุฏุ ูุดุงุดุฉ ุณูููุงุฆูุฉุ ููุฒุงุฌูุฉุ ูููุญููุฉุ ูุฌูููุฉุ ูุญุจูุจุงุช ูููู ุญุงุฏุฉ ุงูุชุฑููุฒ ุฌูููุฉ ููุตูุฉ ูุนูุฏุฉ ูุฐููุฉ ููุญููุฉ".
ุจุงูุชุฃููุฏุ ุณุฃููู ุจุชุฑุฌูุฉ ุงููุต ุงูููุฌูุฏ ูู ุงูููุฑุงุช ูุงูุนูุงููู ูุน ุงูุงูุชุฒุงู ุจุงูุชุนูููุงุช ุงูุชู ูุฏูุชูุง.

## ูุฒู ุงููุทุงูุจุฉ

ูููุฑ ูุฒู ุงููุทุงูุจุฉ ุทุฑููุฉ ูุชุฃููุฏ ุฃู ุชูููู ุฃูููุฉ ุฃุฌุฒุงุก ูุนููุฉ ูู ุงููุทุงูุจุฉุ ููุง ูุชูุญ ูุฒูุฏูุง ูู ุงูุชุญูู ูู ุงูุตูุฑุฉ ุงููููุฏุฉ. ูููู ุฃู ุชุชุถูู ุงููุทุงูุจุฉ ุนุฏุฉ ููุงูููุ ูุงูุชู ูุชู ุชุญููููุง ุฅูู ุชุถูููุงุช ูุตูุฉ ุณูุงููุฉ. ุชุณุชุฎุฏู ุงูููุงุฐุฌ ุงูุชุถูููุงุช ูุชูููู ุทุจูุงุช ุงูุงูุชูุงู ุงููุชูุงุทุน ุงูุฎุงุตุฉ ุจูุง ูุชูููุฏ ุตูุฑุฉ. (ุงูุฑุฃ ุงูููุดูุฑ ุนูู ูุฏููุฉ Stable Diffusion ููุนุฑูุฉ ุงููุฒูุฏ ุญูู ููููุฉ ุนูููุง).

ูุนูู ูุฒู ุงููุทุงูุจุฉ ุนู ุทุฑูู ุฒูุงุฏุฉ ุฃู ุชูููู ูููุงุณ ูุชุฌู ุงูุชุถููู ุงููุตู ุงูุฐู ููุงุจูู ูู ุงููุทุงูุจุฉ. ูุฏ ูุง ุชุฑุบุจ ูู ุฃู ูุฑูุฒ ุงููููุฐุฌ ุนูู ุฌููุน ุงูููุงููู ุจุงูุชุณุงูู. ุฃุณูู ุทุฑููุฉ ูุฅุนุฏุงุฏ ุงูุชุถูููุงุช ุฐุงุช ุงูุฃูุฒุงู ุงููุทุงูุจุฉ ูู ุงุณุชุฎุฏุงู Compelุ ููู ููุชุจุฉ ููุฒู ุงููุทุงูุจุฉ ุงููุตูุฉ ูุฏูุฌูุง. ุจูุฌุฑุฏ ุงูุญุตูู ุนูู ุงูุชุถูููุงุช ุฐุงุช ุงูุฃูุฒุงู ุงููุทุงูุจุฉุ ูููู ุชูุฑูุฑูุง ุฅูู ุฃู ุฎุท ุฃูุงุจูุจ ูุญุชูู ุนูู ูุนููุฉ prompt_embeds (ูุงุฎุชูุงุฑููุง ูุนููุฉ negative_prompt_embeds)ุ ูุซู StableDiffusionPipeline ูStableDiffusionControlNetPipeline ูStableDiffusionXLPipeline.

ูุฐุง ุงูุฏููู ุณูู ูุฑูู ููููุฉ ูุฒู ูุฏูุฌ ูุทุงูุจุงุชู ูุน Compel ูู ๐ค Diffusers.

ูุจู ุฃู ุชุจุฏุฃุ ุชุฃูุฏ ูู ุชุซุจูุช ุฃุญุฏุซ ุฅุตุฏุงุฑ ูู Compel:

ููุฅุฑุดุงุฏุงุช ูู ูุฐุง ุงููุณูุ ุณูููู ุจุชูููุฏ ุตูุฑุฉ ุจุงุณุชุฎุฏุงู ุงููุทุงูุจุฉ "ูุทุฉ ุญูุฑุงุก ุชูุนุจ ุจูุฑุฉ" ุจุงุณุชุฎุฏุงู StableDiffusionPipeline:

### ุงููุฒู

ุณุชูุงุญุธ ุฃูู ูุง ุชูุฌุฏ "ูุฑุฉ" ูู ุงูุตูุฑุฉ! ุฏุนูุง ูุณุชุฎุฏู Compel ูุฒูุงุฏุฉ ูุฒู ููููู "ุงููุฑุฉ" ูู ุงููุทุงูุจุฉ. ูู ุจุฅูุดุงุก ูุงุฆู Compelุ ููุฑุฑ ูุญุฏุฏ ููุงูุน ููุนุงูุฌ ูุตู ุฅููู:

ูุณุชุฎุฏู Compel + ุฃู - ูุฒูุงุฏุฉ ุฃู ุชูููู ูุฒู ูููุฉ ูู ุงููุทุงูุจุฉ. ูุฒูุงุฏุฉ ูุฒู "ุงููุฑุฉ":

ููููู ุฒูุงุฏุฉ ุฃู ุชูููู ูุฒู ุนุฏุฉ ููุงููู ูู ููุณ ุงููุทุงูุจุฉ:

### ุงููุฒุฌ

ููููู ุฃูุถูุง ุฅูุดุงุก ูุฒูุฌ ูุฑุฌุญ ูู ุงููุทุงูุจุงุช ุนู ุทุฑูู ุฅุถุงูุฉ .blend () ุฅูู ูุงุฆูุฉ ูู ุงููุทุงูุจุงุช ูุชูุฑูุฑ ุจุนุถ ุงูุฃูุฒุงู. ูุฏ ูุง ููุชุฌ ูุฒูุฌู ุฏุงุฆููุง ุงููุชูุฌุฉ ุงูุชู ุชุชููุนูุง ูุฃูู ููุณุฑ ุจุนุถ ุงูุงูุชุฑุงุถุงุช ุญูู ููููุฉ ุนูู ุงููุดูุฑ ุงููุตูุ ูุฐุง ูู ุจุงูุชุฌุฑุจุฉ ูุงูุงุณุชูุชุงุน ุจู!

### ุงูุนุทู

ูุนูู ุงูุนุทู ุนูู ูุดุฑ ูู ูุทุงูุจุฉ ุจุดูู ูุณุชูู ููููู ุจุฏูุฌ ูุชุงุฆุฌูุง ุจูุงุณุทุฉ ูุฌููุนูุง ุงููุฑุฌุญ. ุฃุถู .and () ูู ููุงูุฉ ูุงุฆูุฉ ูู ุงููุทุงูุจุงุช ูุฅูุดุงุก ุงูุชุฑุงู:

### ุงูุงูููุงุจ ุงููุตู

ุงูุงูููุงุจ ุงููุตู ูู ุชูููุฉ ูุชุนูู ููููู ูุญุฏุฏ ูู ุจุนุถ ุงูุตูุฑ ุงูุชู ููููู ุงุณุชุฎุฏุงููุง ูุชูููุฏ ุตูุฑ ุฌุฏูุฏุฉ ูุดุฑูุทุฉ ุจุฐูู ุงูููููู.

ูู ุจุฅูุดุงุก ุฎุท ุฃูุงุจูุจ ูุงุณุชุฎุฏู ูุธููุฉ ~loaders.TextualInversionLoaderMixin.load_textual_inversion ูุชุญููู ุงูุชุถูููุงุช ุงูุงูููุงุจูุฉ ุงููุตูุฉ (ูุง ุชุชุฑุฏุฏ ูู ุชุตูุญ Stable Diffusion Conceptualizer ูููุงููู ูุฏุฑุจุฉ 100+):

ูููุฑ Compel ูุฆุฉ DiffusersTextualInversionManager ูุชุจุณูุท ูุฒู ุงููุทุงูุจุฉ ูุน ุงูุงูููุงุจ ุงููุตู. ูู ุจุชูููุฐ DiffusersTextualInversionManager ููุฑุฑู ุฅูู ูุฆุฉ Compel:

ูู ุจุฏูุฌ ุงูููููู ูุดุฑุท ูุทุงูุจุฉ ุจุงุณุชุฎุฏุงู ุจูุงุก ุงูุฌููุฉ <concept>:

### DreamBooth

DreamBooth ูู ุชูููุฉ ูุชูููุฏ ุตูุฑ ุณูุงููุฉ ูููุถูุน ูุง ุจูุงุกู ุนูู ุนุฏุฏ ูููู ููุท ูู ุตูุฑ ุงูููุถูุน ููุชุฏุฑูุจ ุนูููุง. ุฅูู ูุดุงุจู ููุงูููุงุจ ุงููุตูุ ูููู DreamBooth ูููู ุจุชุฏุฑูุจ ุงููููุฐุฌ ุจุงููุงูู ูู ุญูู ุฃู ุงูุงูููุงุจ ุงููุตู ูููู ููุท ุจุชุฏุฑูุจ ุงูุชุถูููุงุช ุงููุตูุฉ. ููุฐุง ูุนูู ุฃูู ูุฌุจ ุงุณุชุฎุฏุงู ~DiffusionPipeline.from_pretrained ูุชุญููู ูููุฐุฌ DreamBooth (ูุง ุชุชุฑุฏุฏ ูู ุชุตูุญ ููุชุจุฉ Stable Diffusion Dreambooth Concepts ูููุงููู ูุฏุฑุจุฉ 100+):

ูู ุจุฅูุดุงุก ูุฆุฉ Compel ูุน ูุญุฏุฏ ููุงูุน ููุนุงูุฌ ูุตูุ ููุฑุฑ ูุทุงูุจุชู ุฅูููุง. ุงุนุชูุงุฏูุง ุนูู ุงููููุฐุฌ ุงูุฐู ุชุณุชุฎุฏููุ ุณุชุญุชุงุฌ ุฅูู ุชุถููู ุงููุนุฑู ุงููุฑูุฏ ูููููุฐุฌ ูู ูุทุงูุจุชู. ุนูู ุณุจูู ุงููุซุงูุ ูุณุชุฎุฏู ูููุฐุฌ "dndcoverart-v1" ุงููุนุฑู "dndcoverart":
ุจุงูุชุฃููุฏุ ุณุฃูุชุฒู ุจุงูุชุนูููุงุช ุงููุฐููุฑุฉ.

### Stable Diffusion XL

ูุชููุฒ Stable Diffusion XL (SDXL) ุจูุฌูุฏ ุฑูุฒูู ููุดูุฑูู ูุตูููุ ูุฐุง ูุฅู ุงุณุชุฎุฏุงูู ูุฎุชูู ูููููุง. ูููุนุงูุฌุฉ ุฐููุ ูุฌุจ ุชูุฑูุฑ ููุง ุงูุฑูุฒูู ูุงููุดูุฑูู ุฅูู ูุฆุฉ Compel:

ูุฐู ุงููุฑุฉุ ุฏุนูุง ูุฒูุฏ ูุฒู "ball" ุจูุนุงูู 1.5 ูููููุญ ุงูุฃููุ ููููู ูุฒู "ball" ุฅูู 0.6 ูููููุญ ุงูุซุงูู. ุชุชุทูุจ ุฃูุถูุง [StableDiffusionXLPipeline] [pooled_prompt_embeds] (ูุงุฎุชูุงุฑููุง [negative_pooled_prompt_embeds])ุ ูุฐุง ูุฌุจ ุชูุฑูุฑ ูุฐู ุงูุนูุงุตุฑ ุฅูู ุงูุฃูุจูุจ ุฌูุจูุง ุฅูู ุฌูุจ ูุน ููุชุฑุงุช ุงูุชูููู:

# ุชุทุจูู ุงูุฃูุฒุงู
ุงููููุญ = ["ูุท ุฃุญูุฑ ููุนุจ ุจูุฑุฉ (1.5)"ุ "ูุท ุฃุญูุฑ ููุนุจ ุจูุฑุฉ (0.6)"]
ุงูุชููููุ ุงููุฌูุน = compel(prompt)

# ุฅูุดุงุก ุงูุตูุฑุฉ
ุงููููุฏ = [torch.Generator().manual_seed(33) ูู _ ูู ูุทุงู (ุทูู (ุงููููุญ))]
ุงูุตูุฑ = pipeline(prompt_embeds=conditioning, pooled_prompt_embeds=pooled, generator=generator, num_inference_steps=30).images
make_image_grid(images, rows=1, cols=2)