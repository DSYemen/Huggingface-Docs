ูู ูุชู ุชุฑุฌูุฉ ุงูุฃุฌุฒุงุก ุงููุญุฏุฏุฉ ูู ุงูุทูุจ:

# ุชูููู ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ

ุชูุซู ุงููููุฉ ุงููุจูุฑุฉ ูู ุงูุฐุงูุฑุฉ ุงููุทููุจุฉ ุนุงุฆูุง ุฃูุงู ุงุณุชุฎุฏุงู ููุงุฐุฌ ุงูุงูุชุดุงุฑ. ูููุชุบูุจ ุนูู ูุฐุง ุงูุชุญุฏูุ ููุงู ุงูุนุฏูุฏ ูู ุงูุชูููุงุช ุงูุชู ููููู ุงุณุชุฎุฏุงููุง ูุชูููู ุงูุฐุงูุฑุฉ ูุชุดุบูู ุญุชู ุฃูุจุฑ ุงูููุงุฐุฌ ุนูู ูุญุฏุงุช ูุนุงูุฌุฉ ุงูุฑุณูููุงุช (GPU) ูู ุงููุฆุฉ ุงููุฌุงููุฉ ุฃู ุงูุงุณุชููุงููุฉ. ููููู ุญุชู ุงูุฌูุน ุจูู ุจุนุถ ูุฐู ุงูุชูููุงุช ูุฒูุงุฏุฉ ุชูููู ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ.

ูู ุงูุนุฏูุฏ ูู ุงูุญุงูุงุชุ ูุคุฏู ุงูุชุญุณูู ูู ุฃุฌู ุงูุฐุงูุฑุฉ ุฃู ุงูุณุฑุนุฉ ุฅูู ุชุญุณูู ุงูุฃุฏุงุก ูู ุงูุฌุงูุจ ุงูุขุฎุฑุ ูุฐูู ูุฌุจ ุนููู ูุญุงููุฉ ุงูุชุญุณูู ููุงุซููู ูุนูุง ูููุง ุงุณุชุทุนุช. ููุฑูุฒ ูุฐุง ุงูุฏููู ุนูู ุชูููู ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ ุฅูู ุงูุญุฏ ุงูุฃุฏููุ ูููู ููููู ุฃูุถูุง ูุนุฑูุฉ ุงููุฒูุฏ ุญูู ููููุฉ [ุชุณุฑูุน ุงูุงุณุชูุชุงุฌ](fp16).

ุชู ุงูุญุตูู ุนูู ุงููุชุงุฆุฌ ุฃุฏูุงู ูู ุฎูุงู ุฅูุดุงุก ุตูุฑุฉ ูุงุญุฏุฉ ุจุญุฌู 512x512 ูู ููุฌู "ุตูุฑุฉ ุฑุงุฆุฏ ูุถุงุก ูุฑูุจ ุญุตุงููุง ุนูู ุงููุฑูุฎ" ูุน 50 ุฎุทูุฉ DDIM ุนูู Nvidia Titan RTXุ ููุง ููุถุญ ุงูุชุณุฑูุน ุงูุฐู ูููู ุชููุนู ูุชูุฌุฉ ูุงูุฎูุงุถ ุงุณุชููุงู ุงูุฐุงูุฑุฉ.

|                  | ุงููููู | ุงูุชุณุฑูุน |
| ---------------- | ------- | ------- |
| ุงูุฃุตูู         | 9.50 ุซุงููุฉ   | 1 ูุฑุฉ      |
| fp16             | 3.61 ุซุงููุฉ   | 2.63 ูุฑุฉ   |
| ุงููููุงุช ุงูุฃุฎูุฑุฉ    | 3.30 ุซุงููุฉ   | 2.88 ูุฑุฉ   |
| ุชุชุจุน UNet      | 3.21 ุซุงููุฉ   | 2.96 ูุฑุฉ   |
| ุงูุชุจุงู ูุนุงู ูู ุญูุซ ุงูุชูููุฉ ููุฐุงูุฑุฉ | 2.63 ุซุงููุฉ  | 3.61 ูุฑุงุช   |

## VAE ุงูููุทูุน

ุชูููู VAE ุงูููุทูุนุฉ ูู ูู ุชุดููุฑ ุฏูุนุงุช ูุจูุฑุฉ ูู ุงูุตูุฑ ุจุฐุงูุฑุฉ VRAM ูุญุฏูุฏุฉ ุฃู ุฏูุนุงุช ุชุญุชูู ุนูู 32 ุตูุฑุฉ ุฃู ุฃูุซุฑ ุนู ุทุฑูู ูู ุชุดููุฑ ุฏูุนุงุช ุงููุฎูููุงุช ุตูุฑุฉ ูุงุญุฏุฉ ูู ูู ูุฑุฉ. ูู ุงููุญุชูู ุฃู ุชุฑุบุจ ูู ุงูุชุฑุงู ูุฐุง ุจู [`~ModelMixin.enable_xformers_memory_efficient_attention`] ูุชูููู ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ ุจุดูู ุฃูุจุฑ ุฅุฐุง ูุงู ูุฏูู xFormers ูุซุจุชูุง.

ูุงุณุชุฎุฏุงู VAE ุงูููุทูุนุ ุงุชุตู ุจู [`~StableDiffusionPipeline.enable_vae_slicing`] ุนูู ุฎุท ุฃูุงุจูุจู ูุจู ุงูุงุณุชุฏูุงู:

```python
import torch
from diffusers import StableDiffusionPipeline

pipeline = StableDiffusionPipeline.from_pretrained(
"runwayml/stable-diffusion-v1-5",
torch_dtype=torch.float16,
use_safetensors=True,
)
pipe = pipeline.to("cuda")

prompt = "ุตูุฑุฉ ูุฑุงุฆุฏ ูุถุงุก ูุฑูุจ ุญุตุงููุง ุนูู ุงููุฑูุฎ"
pipe.enable_vae_slicing()
#pipe.enable_xformers_memory_efficient_attention()
images = pipe([prompt] * 32).images
```

ูุฏ ุชุดุงูุฏ ุฒูุงุฏุฉ ุทูููุฉ ูู ุงูุฃุฏุงุก ูู ูู ุชุดููุฑ VAE ุนูู ุฏูุนุงุช ูุชุนุฏุฏุฉ ุงูุตูุฑุ ููุง ูุฌุจ ุฃู ูููู ููุงู ุฃู ุชุฃุซูุฑ ุนูู ุงูุฃุฏุงุก ูู ุฏูุนุงุช ุงูุตูุฑ ุงููุฑุฏูุฉ.

## VAE ุงููุจูุท

ุชูููู ูุนุงูุฌุฉ VAE ุงููุจูุทุฉ ุฃูุถูุง ุงูุนูู ูุน ุงูุตูุฑ ุงููุจูุฑุฉ ุจุฐุงูุฑุฉ VRAM ูุญุฏูุฏุฉ (ุนูู ุณุจูู ุงููุซุงูุ ุฅูุดุงุก ุตูุฑ 4K ุจุฐุงูุฑุฉ ูุตูู ุนุดูุงุฆู (VRAM) ุณุนุฉ 8 ุฌูุฌุงุจุงูุช) ุนู ุทุฑูู ุชูุณูู ุงูุตูุฑุฉ ุฅูู ุจูุงุทุงุช ูุชุฏุงุฎูุฉุ ููู ุชุดููุฑ ุงูุจูุงุทุงุชุ ุซู ูุฒุฌ ุงููุฎุฑุฌุงุช ูุนูุง ูุชูููู ุงูุตูุฑุฉ ุงูููุงุฆูุฉ. ูุฌุจ ุฃูุถูุง ุงุณุชุฎุฏุงู VAE ุงููุจูุท ูุน [`~ModelMixin.enable_xformers_memory_efficient_attention`] ูุชูููู ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ ุจุดูู ุฃูุจุฑ ุฅุฐุง ูุงู ูุฏูู xFormers ูุซุจุชูุง.

ูุงุณุชุฎุฏุงู ูุนุงูุฌุฉ VAE ุงููุจูุทุฉุ ุงุชุตู ุจู [`~StableDiffusionPipeline.enable_vae_tiling`] ุนูู ุฎุท ุฃูุงุจูุจู ูุจู ุงูุงุณุชุฏูุงู:

```python
import torch
from diffusers import StableDiffusionPipeline, UniPCMultistepScheduler

pipe = StableDiffusionPipeline.from_pretrained(
"runwayml/stable-diffusion-v1-5",
torch_dtype=torch.float16,
use_safetensors=True,
)
pipe.scheduler = UniPCMultistepScheduler.from_config(pipe.scheduler.config)
pipe = pipe.to("cuda")
prompt = "ุตูุฑุฉ ุฌูููุฉ ููููุงุธุฑ ุงูุทุจูุนูุฉ"
pipe.enable_vae_tiling()
#pipe.enable_xformers_memory_efficient_attention()

image = pipe([prompt], width=3840, height=2224, num_inference_steps=20)images [0]
```

ุชุญุชูู ุตูุฑุฉ ุงูุฅุฎุฑุงุฌ ุนูู ุจุนุถ ุงูุงุฎุชูุงูุงุช ูู ูุบูุฉ ุงูุจูุงุท ูุธุฑูุง ููู ุชุดููุฑ ุงูุจูุงุทุงุช ุจุดูู ูููุตูุ ูููู ูุง ูุฌุจ ุฃู ุชุดุงูุฏ ุฃู ุฏุฑุฒุงุช ุญุงุฏุฉ ููุงุถุญุฉ ุจูู ุงูุจูุงุทุงุช. ูุชู ุฅููุงู ุงูุชุจููุท ููุตูุฑ ุงูุชู ูุจูุบ ุญุฌููุง 512x512 ุฃู ุฃุตุบุฑ.

## ุงูุชูุฑูุบ ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ

ูููู ุฃูุถูุง ุชูููุฑ ุงูุฐุงูุฑุฉ ุนู ุทุฑูู ุชูุฑูุบ ุงูุฃูุฒุงู ุฅูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (CPU) ูุชุญููููุง ููุท ุนูู ูุญุฏุฉ ูุนุงูุฌุฉ ุงูุฑุณูููุงุช (GPU) ุนูุฏ ุฅุฌุฑุงุก ุชูุฑูุฑ ููุฃูุงู. ูุบุงูุจูุง ูุง ูููู ุฃู ุชููู ูุฐู ุงูุชูููุฉ ุงุณุชููุงู ุงูุฐุงูุฑุฉ ุฅูู ุฃูู ูู 3 ุฌูุฌุงุจุงูุช.

ูุฃุฏุงุก ุงูุชูุฑูุบ ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉุ ุงุชุตู ุจู [`~StableDiffusionPipeline.enable_sequential_cpu_offload`]:

```Python
import torch
from diffusers import StableDiffusionPipeline

pipe = StableDiffusionPipeline.from_pretrained(
"runwayml/stable-diffusion-v1-5",
torch_dtype=torch.float16,
use_safetensors=True,
)

prompt = "ุตูุฑุฉ ูุฑุงุฆุฏ ูุถุงุก ูุฑูุจ ุญุตุงููุง ุนูู ุงููุฑูุฎ"
pipe.enable_sequential_cpu_offload()
image = pipe(prompt).images [0]
```

ูุนูู ุงูุชูุฑูุบ ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุนูู ุงููุญุฏุงุช ุงููุฑุนูุฉ ุจุฏูุงู ูู ุงูููุงุฐุฌ ุงููุงููุฉ. ูุฐู ูู ุงูุทุฑููุฉ ุงููุซูู ูุชูููู ุงุณุชููุงู ุงูุฐุงูุฑุฉุ ูููู ุงูุงุณุชุฏูุงู ุฃุจุทุฃ ุจูุซูุฑ ุจุณุจุจ ุงูุทุจูุนุฉ ุงูุชูุฑุงุฑูุฉ ูุนูููุฉ ุงูุงูุชุดุงุฑ. ุชููู ูููู Unet ูู ุฎุท ุงูุฃูุงุจูุจ ุจุชุดุบูู ุนุฏุฉ ูุฑุงุช (ูุซููุง ูู ุงูุญุงู `num_inference_steps`)ุ ูู ูู ูุฑุฉุ ูุชู ุชุญููู ุงููุญุฏุงุช ุงููุฑุนูุฉ Unet ูุชุญููููุง ุจุดูู ูุชุณูุณู ุญุณุจ ุงูุญุงุฌุฉุ ููุง ูุคุฏู ุฅูู ุนุฏุฏ ูุจูุฑ ูู ุนูููุงุช ููู ุงูุฐุงูุฑุฉ.

ููุฑ ูู ุงุณุชุฎุฏุงู [ุชูุฑูุบ ุงููููุฐุฌ](#model-offloading) ุฅุฐุง ููุช ุชุฑูุฏ ุงูุชุญุณูู ููุณุฑุนุฉ ูุฃูู ุฃุณุฑุน ุจูุซูุฑ. ุงูููุงูุถุฉ ูู ุฃู ูููุฑุงุช ุงูุฐุงูุฑุฉ ุงูุฎุงุตุฉ ุจู ูู ุชููู ูุจูุฑุฉ.

<Tip warning={true}>

ุนูุฏ ุงุณุชุฎุฏุงู [`~StableDiffusionPipeline.enable_sequential_cpu_offload`]ุ ูุง ุชููู ุฎุท ุงูุฃูุงุจูุจ ุฅูู CUDA ูุณุจููุง ูุฅูุง ุณุชููู ุงูุฒูุงุฏุฉ ูู ุงุณุชููุงู ุงูุฐุงูุฑุฉ ุทูููุฉ ููุท (ุฑุงุฌุน ูุฐุง [ุงููุถูุฉ](https://github.com/huggingface/diffusers/issues/1934) ููุฒูุฏ ูู ุงููุนูููุงุช).

[`~StableDiffusionPipeline.enable_sequential_cpu_offload`] ูู ุนูููุฉ ุฐุงุช ุญุงูุฉ ุชููู ุจุชุซุจูุช ุงูุฎุทุงูุงุช ุนูู ุงูููุงุฐุฌ.

</Tip>

## ุชูุฑูุบ ุงููููุฐุฌ

<Tip>

ูุชุทูุจ ุชูุฑูุบ ุงููููุฐุฌ ๐ค Accelerate ุงูุฅุตุฏุงุฑ 0.17.0 ุฃู ุฃุนูู.

</Tip>

ูุญุงูุธ [ุงูุชูุฑูุบ ุงูุชุณูุณูู ููุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ](#cpu-offloading) ุนูู ุงููุซูุฑ ูู ุงูุฐุงูุฑุฉ ููููู ูุฌุนู ุงูุงุณุชุฏูุงู ุฃุจุทุฃ ูุฃู ุงููุญุฏุงุช ุงููุฑุนูุฉ ูุชู ููููุง ุฅูู ูุญุฏุฉ ูุนุงูุฌุฉ ุงูุฑุณูููุงุช (GPU) ุญุณุจ ุงูุญุงุฌุฉุ ููุชู ุฅุฑุฌุงุนูุง ุนูู ุงูููุฑ ุฅูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (CPU) ุนูุฏูุง ูููู ูุญุฏุฉ ูุนุงูุฌุฉ ุงูุฑุณูููุงุช (GPU) ุจุชุดุบูู ูุญุฏุฉ ุฌุฏูุฏุฉ.

ูุงูุชูุฑูุบ ุงููุงูู ูููููุฐุฌ ูู ุจุฏูู ูููู ุงูููุงุฐุฌ ุงููุงููุฉ ุฅูู ูุญุฏุฉ ูุนุงูุฌุฉ ุงูุฑุณูููุงุช (GPU)ุ ุจุฏูุงู ูู ุงูุชุนุงูู ูุน ุงููุญุฏุงุช ุงููุฑุนูุฉ ููู ูููุฐุฌ. ููุฌุฏ ุชุฃุซูุฑ ุถุฆูู ุนูู ููุช ุงูุงุณุชุฏูุงู (ููุงุฑูุฉ ุจููู ุฎุท ุงูุฃูุงุจูุจ ุฅูู `cuda`)ุ ููุง ูุฒุงู ูููุฑ ุจุนุถ ูููุฑุงุช ุงูุฐุงูุฑุฉ.

ุฃุซูุงุก ุชูุฑูุบ ุงููููุฐุฌุ ูุชู ูุถุน ุฃุญุฏ ุงูููููุงุช ุงูุฑุฆูุณูุฉ ูุฎุท ุงูุฃูุงุจูุจ ููุท (ุนุงุฏุฉู ูุง ูููู ุงูุชุฑููุฒ ุงููุตูุ ูUnet ูVAE)
ูุชู ูุถุนูุง ุนูู ูุญุฏุฉ ูุนุงูุฌุฉ ุงูุฑุณูููุงุช (GPU) ูู ุญูู ุชูุชุธุฑ ุงูููููุงุช ุงูุฃุฎุฑู ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (CPU). ุชุธู ุงูููููุงุช ูุซู Unetุ ุงูุชู ุชุนูู ูุนุฏุฉ ุชูุฑุงุฑุงุชุ ุนูู ูุญุฏุฉ ูุนุงูุฌุฉ ุงูุฑุณูููุงุช (GPU) ุญุชู ูุง ุชููู ููุงู ุญุงุฌุฉ ุฅูููุง.

ูู ุจุชูููู ุชูุฑูุบ ุงููููุฐุฌ ุนู ุทุฑูู ุงุณุชุฏุนุงุก [`~StableDiffusionPipeline.enable_model_cpu_offload`] ุนูู ุฎุท ุงูุฃูุงุจูุจ:

```Python
import torch
from diffusers import StableDiffusionPipeline

pipe = StableDiffusionPipeline.from_pretrained(
"runwayml/stable-diffusion-v1-5",
torch_dtype=torch.float16,
use_safetensors=True,
)

prompt = "ุตูุฑุฉ ูุฑุงุฆุฏ ูุถุงุก ูุฑูุจ ุญุตุงููุง ุนูู ุงููุฑูุฎ"
pipe.enable_model_cpu_offload()
image = pipe(prompt).images [0]
```

<Tip warning={true}>

ูุฅูุบุงุก ุชุญููู ุงูููุงุฐุฌ ุจุดูู ุตุญูุญ ุจุนุฏ ุงุณุชุฏุนุงุฆูุงุ ูู ุงูุถุฑูุฑู ุชุดุบูู ุฎุท ุงูุฃูุงุจูุจ ุจุฃููููุ ููุชู ุงุณุชุฏุนุงุก ุงูููุงุฐุฌ ูู ุงูุชุฑุชูุจ ุงููุชููุน ูุฎุท ุงูุฃูุงุจูุจ. ุชูุฎ ุงูุญุฐุฑ ุฅุฐุง ุชูุช ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูููุงุฐุฌ ุฎุงุฑุฌ ุณูุงู ุฎุท ุงูุฃูุงุจูุจ ุจุนุฏ ุชุซุจูุช ุงูุฎุทุงูุงุช. ุฑุงุฌุน [ุฅุฒุงูุฉ ุงูุฎุทุงูุงุช](https://huggingface.co/docs/accelerate/en/package_reference/big_modeling#accelerate.hooks.remove_hook_from_module) ููุฒูุฏ ูู ุงููุนูููุงุช.

[`~StableDiffusionPipeline.enable_model_cpu_offload`] ูู ุนูููุฉ ุฐุงุช ุญุงูุฉ ุชููู ุจุชุซุจูุช ุงูุฎุทุงูุงุช ุนูู ุงูููุงุฐุฌ ูุงูุญุงูุฉ ุนูู ุฎุท ุงูุฃูุงุจูุจ.

</Tip>

## ุชูุณูู ุงูุฐุงูุฑุฉ ูููููุงุช ุงูุฃุฎูุฑุฉ

ุชูุณูู ุงูุฐุงูุฑุฉ ูููููุงุช ุงูุฃุฎูุฑุฉ ูู ุทุฑููุฉ ุจุฏููุฉ ูุชุฑุชูุจ ุชูุณููุงุช NCHW ูู ุงูุฐุงูุฑุฉ ููุญูุงุธ ุนูู ุชุฑุชูุจ ุงูุฃุจุนุงุฏ. ูุชู ุชุฑุชูุจ ุงููููุงุช ุงูุฃุฎูุฑุฉ ุจุญูุซ ุชุตุจุญ ุงููููุงุช ุงูุจุนุฏ ุงูุฃูุซุฑ ูุซุงูุฉ (ุชุฎุฒูู ุงูุตูุฑ ุจูุณู ููู ุจูุณู). ูุธุฑูุง ูุฃู ุงููุดุบููู ูุง ูุฏุนููู ุญุงูููุง ุชูุณูู ุงููููุงุช ุงูุฃุฎูุฑุฉุ ููุฏ ูุคุฏู ุฐูู ุฅูู ุฃุณูุฃ ุฃุฏุงุกุ ูููู ูุฌุจ ุนููู ูุน ุฐูู ุชุฌุฑุจุชู ููุนุฑูุฉ ูุง ุฅุฐุง ูุงู ูุนูู ููููุฐุฌู.

ุนูู ุณุจูู ุงููุซุงูุ ูุชุนููู ุชูุณูู ุงููููุงุช ุงูุฃุฎูุฑุฉ ูุดุจูุฉ Unet ูู ุฎุท ุงูุฃูุงุจูุจ:

```python
print(pipe.unet.conv_out.state_dict () ["weight"].step()) # (2880ุ 9ุ 3ุ 1)
pipe.unet.to(memory_format=torch.channels_last) # ุนูููุฉ ูู ุงูููุงู
print(pipe.unet.conv_out.state_dict()["weight"].step()) # (2880ุ 1ุ 960ุ 320) ูุฌูุฏ ุฎุทูุฉ 1 ููุจุนุฏ 2 ูุซุจุช ุฃูู ูุนูู
```
## ุชุชุจุน

ูููู ุงูุชุชุจุน ุจุชุดุบูู ูุซุงู ุนูู ุฅุฏุฎุงู tensor ุนุจุฑ ุงููููุฐุฌ ููุญุตู ุนูู ุงูุนูููุงุช ุงูุชู ูุชู ุชูููุฐูุง ุนููู ุฃุซูุงุก ูุฑูุฑู ุนุจุฑ ุทุจูุงุช ุงููููุฐุฌ. ููุชู ุชุญุณูู ุงููุงุจู ููุชูููุฐ ุฃู `ScriptFunction` ุงูุฐู ูุชู ุฅุฑุฌุงุนู ุจุงุณุชุฎุฏุงู ุงูุชุฌููุน ูู ุงูููุช ุงูููุงุณุจ.

ูุชุชุจุน UNet:

... [Code Python] ...

## ุงูุงูุชุจุงู ุงููุนุงู ูู ุญูุซ ุงูุฐุงูุฑุฉ

ููุฏ ุญููุช ุงูุฃุนูุงู ุงูุญุฏูุซุฉ ูู ุชุญุณูู ุนุฑุถ ุงููุทุงู ุงูุชุฑุฏุฏู ูู ูุชูุฉ ุงูุงูุชูุงู ุชุณุฑูุนูุง ูุจูุฑูุง ูุชุฎููุถุงุช ูู ุงุณุชุฎุฏุงู ุฐุงูุฑุฉ GPU. ูุฃุญุฏุซ ููุน ูู ุงูุงูุชูุงู ุงููุนุงู ูู ุญูุซ ุงูุฐุงูุฑุฉ ูู [Flash Attention] (https://arxiv.org/abs/2205.14135) (ููููู ุงูุงุทูุงุน ุนูู ุงูููุฏ ุงูุฃุตูู ูู [HazyResearch/flash-attention] (https://github.com/HazyResearch/flash-attention)).

<Tip>

ุฅุฐุง ูุงู ูุฏูู PyTorch >= 2.0 ูุซุจุชูุงุ ููุง ููุจุบู ุฃู ุชุชููุน ุชุณุฑูุนูุง ููุงุณุชุฏูุงู ุนูุฏ ุชูููู `xformers`.

</Tip>

ูุงุณุชุฎุฏุงู Flash Attentionุ ูู ุจุชุซุจูุช ูุง ููู:

- Pytorch > 1.12
- CUDA ูุชุงุญ
- [xFormers] (xformers)

ุซู ุงุณุชุฏุนุงุก [`~ ModelMixin.enable_xformers_memory_efficient_attention`] ุนูู ุงูุฃูุงุจูุจ:

... [Code Python] ...

ูุฌุจ ุฃู ุชุชุทุงุจู ุณุฑุนุฉ ุงูุชูุฑุงุฑ ุนูุฏ ุงุณุชุฎุฏุงู `xformers` ูุน ุณุฑุนุฉ ุชูุฑุงุฑ PyTorch 2.0 ููุง ูู ููุถุญ [ููุง] (torch2.0).