# ÙƒØ§Ù†Ø¯ÙŠÙ†Ø³ÙƒÙŠ

ØªØ¹Ø¯ Ù†Ù…Ø§Ø°Ø¬ ÙƒØ§Ù†Ø¯ÙŠÙ†Ø³ÙƒÙŠ Ø³Ù„Ø³Ù„Ø© Ù…Ù† Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ù„ØºØ§Øª Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù†ØµÙŠØ©. ÙŠØ³ØªØ®Ø¯Ù… Ù†Ù…ÙˆØ°Ø¬ Kandinsky 2.0 Ù…Ø´ÙØ±ÙŠÙ† Ù†ØµÙŠÙŠÙ† Ù…ØªØ¹Ø¯Ø¯ÙŠ Ø§Ù„Ù„ØºØ§Øª ÙˆÙŠÙ‚ÙˆÙ… Ø¨ØªØ¬Ù…ÙŠØ¹ ØªÙ„Ùƒ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„Ù€ UNet.

ÙŠØºÙŠØ± Kandinsky 2.1 Ø§Ù„Ø¨Ù†ÙŠØ© Ù„ØªØ¶Ù…ÙŠÙ† Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ([` CLIP `](https://huggingface.co/docs/transformers/model_doc/clip)) Ù„ØªÙˆÙ„ÙŠØ¯ Ø®Ø±ÙŠØ·Ø© Ø¨ÙŠÙ† Ø§Ù„Ù†ØµÙˆØµ ÙˆØªØ¶Ù…ÙŠÙ† Ø§Ù„ØµÙˆØ±. ØªÙˆÙØ± Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù…Ø­Ø§Ø°Ø§Ø© Ø£ÙØ¶Ù„ Ù„Ù„Ù†Øµ ÙˆØ§Ù„ØµÙˆØ±Ø© ÙˆÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ Ù…Ø¹ ØªØ¶Ù…ÙŠÙ† Ø§Ù„Ù†Øµ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ØŒ Ù…Ù…Ø§ ÙŠØ¤Ø¯ÙŠ Ø¥Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬ Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø©. ÙˆØ£Ø®ÙŠØ±Ù‹Ø§ØŒ ÙŠØ³ØªØ®Ø¯Ù… Kandinsky 2.1 [ÙÙƒ ØªØ´ÙÙŠØ± Modulating Quantized Vectors (MoVQ)](https://huggingface.co/papers/2209.09002) - ÙˆØ§Ù„Ø°ÙŠ ÙŠØ¶ÙŠÙ Ø·Ø¨Ù‚Ø© Ø§Ù„ØªØ·Ø¨ÙŠØ¹ Ø§Ù„Ø´Ø±Ø·ÙŠ Ø§Ù„Ù…ÙƒØ§Ù†ÙŠ Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ© Ø§Ù„ÙÙˆØªÙˆØºØ±Ø§ÙÙŠØ© - Ù„ØªØ±Ù…ÙŠØ² latents Ø¥Ù„Ù‰ ØµÙˆØ±.

ÙŠØ­Ø³Ù† Kandinsky 2.2 Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø³Ø§Ø¨Ù‚ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ù…Ø´ÙØ± Ø§Ù„ØµÙˆØ±Ø© ÙÙŠ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© Ø¨Ù†Ù…ÙˆØ°Ø¬ CLIP-ViT-G Ø£ÙƒØ¨Ø± Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø©. ÙƒÙ…Ø§ Ø£Ø¹ÙŠØ¯ ØªØ¯Ø±ÙŠØ¨ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© Ø¹Ù„Ù‰ ØµÙˆØ± Ø°Ø§Øª Ø¯Ù‚Ø§Øª ÙˆØ¬ÙˆØ§Ù†Ø¨ Ù…Ø®ØªÙ„ÙØ© Ù„ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ± Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¯Ù‚Ø© ÙˆØ£Ø­Ø¬Ø§Ù… ØµÙˆØ± Ù…Ø®ØªÙ„ÙØ©.

ÙŠØ¨Ø³Ø· Kandinsky 3 Ø§Ù„Ø¨Ù†ÙŠØ© ÙˆÙŠÙ†ØªÙ‚Ù„ Ø¨Ø¹ÙŠØ¯Ù‹Ø§ Ø¹Ù† Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªÙˆÙ„ÙŠØ¯ Ø°Ø§Øª Ø§Ù„Ù…Ø±Ø­Ù„ØªÙŠÙ† Ø§Ù„ØªÙŠ ØªØªØ¶Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£ÙˆÙ„ÙŠ ÙˆÙ†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø§Ù†ØªØ´Ø§Ø±. Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø°Ù„ÙƒØŒ ÙŠØ³ØªØ®Ø¯Ù… Kandinsky 3 [Flan-UL2](https://huggingface.co/google/flan-ul2) Ù„ØªØ´ÙÙŠØ± Ø§Ù„Ù†ØµØŒ Ùˆ UNet Ù…Ø¹ [BigGan-deep](https://hf.co/papers/1809.11096) blocksØŒ Ùˆ [Sber-MoVQGAN](https://github.com/ai-forever/MoVQGAN) Ù„ØªØ±Ù…ÙŠØ² latents Ø¥Ù„Ù‰ ØµÙˆØ±. ÙŠØªÙ… ØªØ­Ù‚ÙŠÙ‚ ÙÙ‡Ù… Ø§Ù„Ù†Øµ ÙˆØ¬ÙˆØ¯Ø© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ÙˆÙ„Ø¯Ø© Ø¨Ø´ÙƒÙ„ Ø£Ø³Ø§Ø³ÙŠ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø´ÙØ± Ù†ØµÙŠ Ø£ÙƒØ¨Ø± Ùˆ UNet.

Ø³ÙŠÙˆØ¶Ø­ Ù‡Ø°Ø§ Ø§Ù„Ø¯Ù„ÙŠÙ„ ÙƒÙŠÙÙŠØ© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ù…Ø§Ø°Ø¬ Kandinsky Ù„Ù„ØµÙˆØ±Ø© Ø§Ù„Ù†ØµÙŠØ©ØŒ ÙˆØ§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ ØµÙˆØ±Ø©ØŒ ÙˆØ§Ù„ØªÙ„ÙˆÙŠÙ†ØŒ ÙˆØ§Ù„ØªÙ†Ù‚Ù„ØŒ ÙˆØ§Ù„Ù…Ø²ÙŠØ¯.

Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡ØŒ ØªØ£ÙƒØ¯ Ù…Ù† ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:

<Tip warning={true}>

ÙŠØ¹Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… Kandinsky 2.1 Ùˆ 2.2 Ù…ØªØ´Ø§Ø¨Ù‡Ù‹Ø§ Ø¬Ø¯Ù‹Ø§! Ø§Ù„ÙØ±Ù‚ Ø§Ù„ÙˆØ­ÙŠØ¯ Ù‡Ùˆ Ø£Ù† Kandinsky 2.2 Ù„Ø§ ÙŠÙ‚Ø¨Ù„ `prompt` ÙƒØ¥Ø¯Ø®Ø§Ù„ Ø¹Ù†Ø¯ ÙÙƒ ØªØ´ÙÙŠØ± latents. Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø°Ù„ÙƒØŒ ÙŠÙ‚Ø¨Ù„ Kandinsky 2.2 ÙÙ‚Ø· `image_embeds` Ø£Ø«Ù†Ø§Ø¡ ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±.

<br>

Ù„Ø¯Ù‰ Kandinsky 3 Ø¨Ù†ÙŠØ© Ø£ÙƒØ«Ø± Ø¥Ø­ÙƒØ§Ù…Ø§ ÙˆÙ„Ø§ ÙŠØªØ·Ù„Ø¨ Ù†Ù…ÙˆØ°Ø¬Ù‹Ø§ Ø£ÙˆÙ„ÙŠÙ‹Ø§. ÙˆÙ‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ø£Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø§Ù†ØªØ´Ø§Ø± Ø§Ù„Ø£Ø®Ø±Ù‰ Ù…Ø«Ù„ [Stable Diffusion XL](sdxl).

</Tip>

## Ù†Øµ Ø¥Ù„Ù‰ ØµÙˆØ±Ø©

Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ù…Ø§Ø°Ø¬ Kandinsky Ù„Ø£ÙŠ Ù…Ù‡Ù…Ø©ØŒ Ø§Ø¨Ø¯Ø£ Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ø¨Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ù„ØªØ´ÙÙŠØ± Ø§Ù„ÙÙƒØ±Ø© ÙˆØªÙˆÙ„ÙŠØ¯ ØªØ¶Ù…ÙŠÙ† Ø§Ù„ØµÙˆØ±Ø©. ÙƒÙ…Ø§ ÙŠÙ‚ÙˆÙ… Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ø¨ØªÙˆÙ„ÙŠØ¯ `negative_image_embeds` Ø§Ù„ØªÙŠ ØªØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø³Ù„Ø¨ÙŠØ© `""`. Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬ Ø£ÙØ¶Ù„ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ…Ø±ÙŠØ± `negative_prompt` Ø§Ù„ÙØ¹Ù„ÙŠ Ø¥Ù„Ù‰ Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£ÙˆÙ„ÙŠØŒ ÙˆÙ„ÙƒÙ† Ù‡Ø°Ø§ Ø³ÙŠØ²ÙŠØ¯ Ù…Ù† Ø­Ø¬Ù… Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„ÙØ¹Ø§Ù„Ø© Ù„Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ø¨Ù…Ù‚Ø¯Ø§Ø± Ù…Ø±ØªÙŠÙ†.

<hfoptions id="text-to-image">

<hfoption id="Kandinsky 2.1">

```py
from diffusers import KandinskyPriorPipeline, KandinskyPipeline
import torch

prior_pipeline = KandinskyPriorPipeline.from_pretrained("kandinsky-community/kandinsky-2-1-prior", torch_dtype=torch.float16).to("cuda")
pipeline = KandinskyPipeline.from_pretrained("kandinsky-community/kandinsky-2-1", torch_dtype=torch.float16).to("cuda")

prompt = "A alien cheeseburger creature eating itself, claymation, cinematic, moody lighting"
negative_prompt = "low quality, bad quality" # Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„ØªØ¶Ù…ÙŠÙ† ÙÙƒØ±Ø© Ø³Ù„Ø¨ÙŠØ©ØŒ ÙˆÙ„ÙƒÙ† Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØªÙƒÙˆÙ† Ø£ÙØ¶Ù„ Ø¹Ø§Ø¯Ø©Ù‹
image_embedsØŒ negative_image_embeds = prior_pipeline(promptØŒ negative_promptØŒ guidance_scale=1.0).to_tuple()
```

Ø§Ù„Ø¢Ù† Ù‚Ù… Ø¨ØªÙ…Ø±ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª ÙˆØ§Ù„ØªØ¶Ù…ÙŠÙ†Ø§Øª Ø¥Ù„Ù‰ [`KandinskyPipeline`] Ù„ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø©:

```py
image = pipeline(promptØŒ image_embeds=image_embedsØŒ negative_prompt=negative_promptØŒ negative_image_embeds=negative_image_embedsØŒ height=768ØŒ width=768).images[0]
image
```

<div class="flex justify-center">
<img class="rounded-xl" src="https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/diffusers/kandinsky-docs/cheeseburger.png"/>
</div>

</hfoption>

<hfoption id="Kandinsky 2.2">

```py
from diffusers import KandinskyV22PriorPipeline, KandinskyV22Pipeline
import torch

prior_pipeline = KandinskyV22PriorPipeline.from_pretrained("kandinsky-community/kandinsky-2-2-prior"ØŒ torch_dtype=torch.float16).to("cuda")
pipeline = KandinskyV22Pipeline.from_pretrained("kandinsky-community/kandinsky-2-2-decoder"ØŒ torch_dtype=torch.float16).to("cuda")

prompt = "A alien cheeseburger creature eating itself, claymation, cinematic, moody lighting"
negative_prompt = "low quality, bad quality" # Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„ØªØ¶Ù…ÙŠÙ† ÙÙƒØ±Ø© Ø³Ù„Ø¨ÙŠØ©ØŒ ÙˆÙ„ÙƒÙ† Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØªÙƒÙˆÙ† Ø£ÙØ¶Ù„ Ø¹Ø§Ø¯Ø©Ù‹
image_embedsØŒ negative_image_embeds = prior_pipeline(promptØŒ guidance_scale=1.0).to_tuple()
```

Ù…Ø±Ø± `image_embeds` Ùˆ` negative_image_embeds` Ø¥Ù„Ù‰ [`KandinskyV22Pipeline`] Ù„ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø©:

```py
image = pipeline(image_embeds=image_embedsØŒ negative_image_embeds=negative_image_embedsØŒ height=768ØŒ width=768).images[0]
image
```

<div class="flex justify-center">
<img class="rounded-xl" src="https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/diffusers/kandinsky-text-to-image.png"/>
</div>

</hfoption>

<hfoption id="Kandinsky 3">

Kandinsky 3 Ù„Ø§ ÙŠØªØ·Ù„Ø¨ Ù†Ù…ÙˆØ°Ø¬Ù‹Ø§ Ø£ÙˆÙ„ÙŠÙ‹Ø§ØŒ Ù„Ø°Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ù…ÙŠÙ„ [`Kandinsky3Pipeline`] Ù…Ø¨Ø§Ø´Ø±Ø©Ù‹ ÙˆØªÙ…Ø±ÙŠØ± ÙÙƒØ±Ø© Ù„ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø©:

```py
from diffusers import Kandinsky3Pipeline
import torch

pipeline = Kandinsky3Pipeline.from_pretrained("kandinsky-community/kandinsky-3"ØŒ variant="fp16"ØŒ torch_dtype=torch.float16)
pipeline.enable_model_cpu_offload()

prompt = "A alien cheeseburger creature eating itself, claymation, cinematic, moody lighting"
image = pipeline(prompt).images[0]
image
```

</hfoption>

</hfoptions>

ÙŠÙˆÙØ± ğŸ¤— Diffusers Ø£ÙŠØ¶Ù‹Ø§ ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª (API) Ø´Ø§Ù…Ù„Ø© Ù…Ø¹ [`KandinskyCombinedPipeline`] Ùˆ [`KandinskyV22CombinedPipeline`]ØŒ Ù…Ù…Ø§ ÙŠØ¹Ù†ÙŠ Ø£Ù†Ù‡ Ù„Ø§ ÙŠÙ„Ø²Ù… ØªØ­Ù…ÙŠÙ„ Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£ÙˆÙ„ÙŠ ÙˆØ®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø´ÙƒÙ„ Ù…Ù†ÙØµÙ„. ÙŠÙ‚ÙˆÙ… Ø®Ø· Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù…Ø¬Ù…Ø¹ Ø¨ØªØ­Ù…ÙŠÙ„ ÙƒÙ„ Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£ÙˆÙ„ÙŠ ÙˆÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§. Ù„Ø§ ÙŠØ²Ø§Ù„ Ø¨Ø¥Ù…ÙƒØ§Ù†Ùƒ ØªØ¹ÙŠÙŠÙ† Ù‚ÙŠÙ… Ù…Ø®ØªÙ„ÙØ© Ù„Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø¹Ù„Ù…Ø§Øª `prior_guidance_scale` Ùˆ` prior_num_inference_steps` Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª.

Ø§Ø³ØªØ®Ø¯Ù… [`AutoPipelineForText2Image`] Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø®Ø·ÙˆØ· Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù…Ø¬Ù…Ø¹Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§:

<hfoptions id="text-to-image">

<hfoption id="Kandinsky 2.1">

```py
from diffusers import AutoPipelineForText2Image
import torch

pipeline = AutoPipelineForText2Image.from_pretrained("kandinsky-community/kandinsky-2-1"ØŒ torch_dtype=torch.float16)
pipeline.enable_model_cpu_offload()

prompt = "A alien cheeseburger creature eating itself, claymation, cinematic, moody lighting"
negative_prompt = "low quality, bad quality"

image = pipeline(prompt=promptØŒ negative_prompt=negative_promptØŒ prior_guidance_scale=1.0ØŒ guidance_scale=4.0ØŒ height=768ØŒ width=768).images[0]
image
```

</hfoption>

<hfoption id="Kandinsky 2.2">

```py
from diffusers import AutoPipelineForText2Image
import torch

pipeline = AutoPipelineForText2Image.from_pretrained("kandinsky-community/kandinsky-2-2-decoder"ØŒ torch_dtype=torch.float16)
pipeline.enable_model_cpu_offload()

prompt = "A alien cheeseburger creature eating itself, claymation, cinematic, moody lighting"
negative_prompt = "low quality, bad quality"

image = pipeline(prompt=promptØŒ negative_prompt=negative_promptØŒ prior_guidance_scale=1.0ØŒ guidance_scale=4.0ØŒ height=768ØŒ width=768).images[0]
image
```

</hfoption>

</hfoptions>
Ø¨Ø§Ù„ØªØ£ÙƒÙŠØ¯! ÙÙŠÙ…Ø§ ÙŠÙ„ÙŠ ØªØ±Ø¬Ù…Ø© Ù„Ù„Ù†Øµ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„ÙÙ‚Ø±Ø§Øª ÙˆØ§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ù…Ø¹ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ ØªÙ†Ø³ÙŠÙ‚ Markdown:

## Image-to-image

Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ ØµÙˆØ±Ø©ØŒ Ù‚Ù… Ø¨ØªÙ…Ø±ÙŠØ± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ÙˆÙ…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ù†Øµ Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Ø®Ø· Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨. Ø§Ø¨Ø¯Ø£ Ø¨ØªØ­Ù…ÙŠÙ„ Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø³Ø§Ø¨Ù‚:

Ù„ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© Ù„Ù„Ø´Ø±Ø· Ø¹Ù„ÙŠÙ‡Ø§:

```py
from diffusers.utils import load_image

# Ù‚Ù… Ø¨ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©
url = "https://raw.githubusercontent.com/CompVis/stable-diffusion/main/assets/stable-samples/img2img/sketch-mountains-input.jpg"
original_image = load_image(url)
original_image = original_image.resize((768, 512))
```

![Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©](https://raw.githubusercontent.com/CompVis/stable-diffusion/main/assets/stable-samples/img2img/sketch-mountains-input.jpg)

Ù‚Ù… Ø¨ØªÙˆÙ„ÙŠØ¯ `image_embeds` Ùˆ `negative_image_embeds` Ù…Ø¹ Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø³Ø§Ø¨Ù‚:

```py
prompt = "Ù…Ù†Ø¸Ø± Ø·Ø¨ÙŠØ¹ÙŠ Ø®ÙŠØ§Ù„ÙŠØŒ Ø¥Ø¶Ø§Ø¡Ø© Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠØ©"
negative_prompt = "Ø¬ÙˆØ¯Ø© Ù…Ù†Ø®ÙØ¶Ø©ØŒ Ø¬ÙˆØ¯Ø© Ø³ÙŠØ¦Ø©"

image_embeds, negative_image_embeds = prior_pipeline(prompt, negative_prompt).to_tuple()
```

Ø§Ù„Ø¢Ù† Ù‚Ù… Ø¨ØªÙ…Ø±ÙŠØ± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©ØŒ ÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª ÙˆØ§Ù„ØªØ±Ù…ÙŠØ² Ø¥Ù„Ù‰ Ø®Ø· Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨ Ù„Ø¥Ù†Ø´Ø§Ø¡ ØµÙˆØ±Ø©:

Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… [`AutoPipelineForImage2Image`] Ù„Ù„Ø§ØªØµØ§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø®Ø·ÙˆØ· Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù…Ø¬Ù…Ø¹Ø©:

```py
from diffusers import AutoPipelineForImage2Image
from diffusers.utils import make_image_grid, load_image
import torch

pipeline = AutoPipelineForImage2Image.from_pretrained("kandinsky-community/kandinsky-2-1", torch_dtype=torch.float16, use_safetensors=True)
pipeline.enable_model_cpu_offload()

prompt = "Ù…Ù†Ø¸Ø± Ø·Ø¨ÙŠØ¹ÙŠ Ø®ÙŠØ§Ù„ÙŠØŒ Ø¥Ø¶Ø§Ø¡Ø© Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠØ©"
negative_prompt = "Ø¬ÙˆØ¯Ø© Ù…Ù†Ø®ÙØ¶Ø©ØŒ Ø¬ÙˆØ¯Ø© Ø³ÙŠØ¦Ø©"

url = "https://raw.githubusercontent.com/CompVis/stable-diffusion/main/assets/stable-samples/img2img/sketch-mountains-input.jpg"
original_image = load_image(url)

original_image.thumbnail((768, 768))

image = pipeline(prompt=prompt, negative_prompt=negative_prompt, image=original_image, strength=0.3).images[0]
make_image_grid([original_image.resize((512, 512)), image.resize((512, 512))], rows=1, cols=2)
```

![Ù†ØªÙŠØ¬Ø© Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ ØµÙˆØ±Ø©](https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/diffusers/kandinsky-docs/img2img_fantasyland.png)

```py
from diffusers import AutoPipelineForImage2Image
from diffusers.utils import make_image_grid, load_image
import torch

pipeline = AutoPipelineForImage2Image.from_pretrained("kandinsky-community/kandinsky-2-2-decoder", torch_dtype=torch.float16)
pipeline.enable_model_cpu_offload()

prompt = "Ù…Ù†Ø¸Ø± Ø·Ø¨ÙŠØ¹ÙŠ Ø®ÙŠØ§Ù„ÙŠØŒ Ø¥Ø¶Ø§Ø¡Ø© Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠØ©"
negative_prompt = "Ø¬ÙˆØ¯Ø© Ù…Ù†Ø®ÙØ¶Ø©ØŒ Ø¬ÙˆØ¯Ø© Ø³ÙŠØ¦Ø©"

url = "https://raw.githubusercontent.com/CompVis/stable-diffusion/main/assets/stable-samples/img2img/sketch-mountains-input.jpg"
original_image = load_image(url)

original_image.thumbnail((768, 768))

image = pipeline(prompt=prompt, negative_prompt=negative_prompt, image=original_image, strength=0.3).images[0]
make_image_grid([original_image.resize((512, 512)), image.resize((512, 512))], rows=1, cols=2)
```

![Ù†ØªÙŠØ¬Ø© Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ ØµÙˆØ±Ø©](https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/diffusers/kandinsky-image-to-image.png)
## Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØµÙˆØ±

Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØµÙˆØ±ØŒ Ø³ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©ØŒ ÙˆÙ‚Ù†Ø§Ø¹ Ù„Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø±Ø§Ø¯ Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ ÙÙŠ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©ØŒ ÙˆÙ†Øµ ÙŠÙˆØ¶Ø­ Ù…Ø§ ØªØ±ÙŠØ¯ Ø¥ÙƒÙ…Ø§Ù„Ù‡. Ù‚Ù… Ø¨ØªØ­Ù…ÙŠÙ„ Ø®Ø· Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ø£ÙˆÙ„ÙŠ:

```py
from diffusers import KandinskyInpaintPipeline, KandinskyPriorPipeline
from diffusers.utils import load_image, make_image_grid
import torch
import numpy as np
from PIL import Image

prior_pipeline = KandinskyPriorPipeline.from_pretrained("kandinsky-community/kandinsky-2-1-prior", torch_dtype=torch.float16, use_safetensors=True).to("cuda")
pipeline = KandinskyInpaintPipeline.from_pretrained("kandinsky-community/kandinsky-2-1-inpaint", torch_dtype=torch.float16, use_safetensors=True).to("cuda")
```

Ù‚Ù… Ø¨ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© Ø£ÙˆÙ„ÙŠØ© ÙˆØ¥Ù†Ø´Ø§Ø¡ Ù‚Ù†Ø§Ø¹:

```py
init_image = load_image("https://huggingface.co/datasets/hf-internal-testing/diffusers-images/resolve/main/kandinsky/cat.png")
mask = np.zeros((768, 768), dtype=np.float32)
# Ù‚Ù†Ø§Ø¹ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø£Ø¹Ù„Ù‰ Ø±Ø£Ø³ Ø§Ù„Ù‚Ø·Ø©
mask[:250, 250:-250] = 1
```

Ù‚Ù… Ø¨ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªØ¶Ù…ÙŠÙ† Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ø£ÙˆÙ„ÙŠ:

```py
prompt = "Ù‚Ø¨Ø¹Ø©"
prior_output = prior_pipeline(prompt)
```

Ø§Ù„Ø¢Ù† Ù‚Ù… Ø¨ØªÙ…Ø±ÙŠØ± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ÙˆØ§Ù„Ù‚Ù†Ø§Ø¹ ÙˆØ§Ù„Ù†Øµ ÙˆØ§Ù„ØªØ¶Ù…ÙŠÙ† Ø¥Ù„Ù‰ Ø®Ø· Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨ Ù„Ø¥Ù†Ø´Ø§Ø¡ ØµÙˆØ±Ø©:

```py
output_image = pipeline(prompt, image=init_image, mask_image=mask, **prior_output, height=768, width=768, num_inference_steps=150).images[0]
mask = Image.fromarray((mask*255).astype('uint8'), 'L')
make_image_grid([init_image, mask, output_image], rows=1, cols=3)
```

ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ù‹Ø§ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ [`KandinskyInpaintCombinedPipeline`] Ø§Ù„Ø´Ø§Ù…Ù„ Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ùˆ [`KandinskyV22InpaintCombinedPipeline`] Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø®Ø·ÙŠ Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ø£ÙˆÙ„ÙŠ ÙˆÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± Ù…Ø¹Ù‹Ø§ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©. Ø§Ø³ØªØ®Ø¯Ù… [`AutoPipelineForInpainting`] Ù„Ù‡Ø°Ø§:

```py
import torch
import numpy as np
from PIL import Image
from diffusers import AutoPipelineForInpainting
from diffusers.utils import load_image, make_image_grid

pipe = AutoPipelineForInpainting.from_pretrained("kandinsky-community/kandinsky-2-1-inpaint", torch_dtype=torch.float16)
pipe.enable_model_cpu_offload()

init_image = load_image("https://huggingface.co/datasets/hf-internal-testing/diffusers-images/resolve/main/kandinsky/cat.png")
mask = np.zeros((768, 768), dtype=np.float32)
# Ù‚Ù†Ø§Ø¹ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø£Ø¹Ù„Ù‰ Ø±Ø£Ø³ Ø§Ù„Ù‚Ø·Ø©
mask[:250, 250:-250] = 1
prompt = "Ù‚Ø¨Ø¹Ø©"

output_image = pipe(prompt=prompt, image=init_image, mask_image=mask).images[0]
mask = Image.fromarray((mask*255).astype('uint8'), 'L')
make_image_grid([init_image, mask, output_image], rows=1, cols=3)
```

## Ø§Ù„Ø§Ø³ØªÙŠÙØ§Ø¡

ÙŠØªÙŠØ­ Ø§Ù„Ø§Ø³ØªÙŠÙØ§Ø¡ Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„ÙØ±Ø§ØºØ§Øª Ø¨ÙŠÙ† ØªØ¶Ù…ÙŠÙ† Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„Ù†ØµØŒ ÙˆÙ‡ÙŠ Ø·Ø±ÙŠÙ‚Ø© Ø±Ø§Ø¦Ø¹Ø© Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„ÙˆØ³ÙŠØ·Ø© Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø£ÙˆÙ„ÙŠØ©. Ù‚Ù… Ø¨ØªØ­Ù…ÙŠÙ„ Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ÙˆØµÙˆØ±ØªÙŠÙ† ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙŠÙØ§Ø¡ Ø¨ÙŠÙ†Ù‡Ù…Ø§:

```py
from diffusers import KandinskyPriorPipeline, KandinskyPipeline
from diffusers.utils import load_image, make_image_grid
import torch

prior_pipeline = KandinskyPriorPipeline.from_pretrained("kandinsky-community/kandinsky-2-1-prior", torch_dtype=torch.float16, use_safetensors=True).to("cuda")
img_1 = load_image("https://huggingface.co/datasets/hf-internal-testing/diffusers-images/resolve/main/kandinsky/cat.png")
img_2 = load_image("https://huggingface.co/datasets/hf-internal-testing/diffusers-images/resolve/main/kandinsky/starry_night.jpeg")
make_image_grid([img_1.resize((512,512)), img_2.resize((512,512))], rows=1, cols=2)
```

Ø­Ø¯Ø¯ Ø§Ù„Ù†ØµÙˆØµ Ø£Ùˆ Ø§Ù„ØµÙˆØ± Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙŠÙØ§Ø¡ Ø¨ÙŠÙ†Ù‡Ø§ØŒ ÙˆÙ‚Ù… Ø¨ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£ÙˆØ²Ø§Ù† Ù„ÙƒÙ„ Ù†Øµ Ø£Ùˆ ØµÙˆØ±Ø©. Ø¬Ø±Ø¨ Ù…Ø¹ Ø§Ù„Ø£ÙˆØ²Ø§Ù† Ø§Ù„Ù…Ø®ØªÙ„ÙØ© Ù„Ù…Ø¹Ø±ÙØ© ÙƒÙŠÙÙŠØ© ØªØ£Ø«ÙŠØ±Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªÙŠÙØ§Ø¡!

```py
images_texts = ["Ù‚Ø·Ø©", img_1, img_2]
weights = [0.3, 0.3, 0.4]
```

Ù‚Ù… Ø¨Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ÙˆØ¸ÙŠÙØ© `interpolate` Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªØ¶Ù…ÙŠÙ†Ø§ØªØŒ Ø«Ù… Ù‚Ù… Ø¨ØªÙ…Ø±ÙŠØ±Ù‡Ø§ Ø¥Ù„Ù‰ Ø®Ø· Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨ Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø©:

```py
# ÙŠÙ…ÙƒÙ† ØªØ±Ùƒ Ø§Ù„Ù†Øµ ÙØ§Ø±ØºÙ‹Ø§
prompt = ""
prior_out = prior_pipeline.interpolate(images_texts, weights)

pipeline = KandinskyPipeline.from_pretrained("kandinsky-community/kandinsky-2-1", torch_dtype=torch.float16, use_safetensors=True).to("cuda")

image = pipeline(prompt, **prior_out, height=768, width=768).images[0]
image
```
Ø¨Ø§Ù„ØªØ£ÙƒÙŠØ¯ØŒ Ø³Ø£Ù‚ÙˆÙ… Ø¨ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù†Øµ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„ÙÙ‚Ø±Ø§Øª ÙˆØ§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ù…Ø¹ Ù…Ø±Ø§Ø¹Ø§Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„ØªÙŠ Ù‚Ø¯Ù…ØªÙ‡Ø§.

## ControlNet

ØªÙ…ÙƒÙ‘Ù† ControlNet Ù…Ù† ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…ÙØ¯Ø±Ø¨Ø© Ù…Ø³Ø¨Ù‚Ù‹Ø§ Ø§Ù„ÙƒØ¨ÙŠØ±Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø¯Ø®Ù„Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù…Ø«Ù„ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¹Ù…Ù‚ Ø£Ùˆ ÙƒØ´Ù Ø§Ù„Ø­ÙˆØ§Ù. Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ‡ÙŠØ¦Ø© Kandinsky 2.2 Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ø±ÙŠØ·Ø© Ø¹Ù…Ù‚ Ø­ØªÙ‰ ÙŠÙÙ‡Ù… Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙˆÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø¨Ù†ÙŠØ© ØµÙˆØ±Ø© Ø§Ù„Ø¹Ù…Ù‚.

Ø¯Ø¹ÙˆÙ†Ø§ Ù†Ù‚ÙˆÙ… Ø¨ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© ÙˆØ§Ø³ØªØ®Ø±Ø§Ø¬ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¹Ù…Ù‚ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡Ø§:

Ø§Ù„ØµÙˆØ±Ø©:

Ø«Ù… ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… "Ø§Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©" Ù…Ù† Transformers Ù…Ù† Hugging Face Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ø³ØªØ±Ø¯Ø§Ø¯ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¹Ù…Ù‚:

### Text-to-image

Ù‚Ù… Ø¨ØªØ­Ù…ÙŠÙ„ Ø®Ø· Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù…Ø³Ø¨Ù‚ ÙˆØ§Ù„Ø®Ø· KandinskyV22ControlnetPipeline:

Ù‚Ù… Ø¨ØªÙˆÙ„ÙŠØ¯ ØªØ¶Ù…ÙŠÙ† Ø§Ù„ØµÙˆØ±Ø© Ù…Ù† Ù…ÙˆØ¬Ù‡ ÙˆÙ…Ø­Ø« Ø³Ù„Ø¨ÙŠ:

Ø£Ø®ÙŠØ±Ù‹Ø§ØŒ Ù‚Ù… Ø¨ØªÙ…Ø±ÙŠØ± ØªØ¶Ù…ÙŠÙ† Ø§Ù„ØµÙˆØ±Ø© ÙˆØµÙˆØ±Ø© Ø§Ù„Ø¹Ù…Ù‚ Ø¥Ù„Ù‰ KandinskyV22ControlnetPipeline Ù„ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø©:

Ø§Ù„ØµÙˆØ±Ø©:

### Image-to-image

Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ControlNetØŒ Ø³ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø§ ÙŠÙ„ÙŠ:

- KandinskyV22PriorEmb2EmbPipeline Ù„ØªÙˆÙ„ÙŠØ¯ ØªØ¶Ù…ÙŠÙ† Ø§Ù„ØµÙˆØ±Ø© Ù…Ù† Ù…ÙˆØ¬Ù‡ Ù†ØµÙŠ ÙˆØµÙˆØ±Ø© Ø£ÙˆÙ„ÙŠØ©
- KandinskyV22ControlnetImg2ImgPipeline Ù„ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ÙˆØªØ¶Ù…ÙŠÙ† Ø§Ù„ØµÙˆØ±Ø©

Ù‚Ù… Ø¨Ù…Ø¹Ø§Ù„Ø¬Ø© ÙˆØ§Ø³ØªØ®Ø±Ø§Ø¬ Ø®Ø±ÙŠØ·Ø© Ø¹Ù…Ù‚ Ù„ØµÙˆØ±Ø© Ø£ÙˆÙ„ÙŠØ© Ù„Ù‚Ø·Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… "Ø§Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©" Ù…Ù† Transformers Ù…Ù† Hugging Face:

Ù‚Ù… Ø¨ØªØ­Ù…ÙŠÙ„ Ø®Ø· Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù…Ø³Ø¨Ù‚ ÙˆKandinskyV22ControlnetImg2ImgPipeline:

Ù‚Ù… Ø¨ØªÙ…Ø±ÙŠØ± Ù…ÙˆØ¬Ù‡ Ù†ØµÙŠ ÙˆØµÙˆØ±Ø© Ø£ÙˆÙ„ÙŠØ© Ø¥Ù„Ù‰ Ø®Ø· Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù…Ø³Ø¨Ù‚ Ù„ØªÙˆÙ„ÙŠØ¯ ØªØ¶Ù…ÙŠÙ† Ø§Ù„ØµÙˆØ±Ø©:

Ø§Ù„Ø¢Ù† ÙŠÙ…ÙƒÙ†Ùƒ ØªØ´ØºÙŠÙ„ KandinskyV22ControlnetImg2ImgPipeline Ù„ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ÙˆØªØ¶Ù…ÙŠÙ† Ø§Ù„ØµÙˆØ±Ø©:

Ø§Ù„ØµÙˆØ±Ø©:

## Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª

Kandinsky ÙØ±ÙŠØ¯ Ù…Ù† Ù†ÙˆØ¹Ù‡ Ù„Ø£Ù†Ù‡ ÙŠØªØ·Ù„Ø¨ Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ù…Ø³Ø¨Ù‚ Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø®Ø±Ø§Ø¦Ø·ØŒ ÙˆØ®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø«Ø§Ù†Ù Ù„ØªØ±Ù…ÙŠØ² Ø§Ù„Ù…Ø­ÙØ²Ø§Øª Ø¥Ù„Ù‰ ØµÙˆØ±Ø©. ÙŠØ¬Ø¨ ØªØ±ÙƒÙŠØ² Ø¬Ù‡ÙˆØ¯ Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø¹Ù„Ù‰ Ø®Ø· Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ø«Ø§Ù†ÙŠ Ù„Ø£Ù†Ù‡ ÙŠØªÙ… ÙÙŠÙ‡ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ø­Ø³Ø§Ø¨. ÙÙŠÙ…Ø§ ÙŠÙ„ÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ù†ØµØ§Ø¦Ø­ Ù„ØªØ­Ø³ÙŠÙ† Kandinsky Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§Ø³ØªØ¯Ù„Ø§Ù„.

1. Ù‚Ù… Ø¨ØªÙ…ÙƒÙŠÙ† xFormers Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ³ØªØ®Ø¯Ù… PyTorch < 2.0:

2. Ù‚Ù… Ø¨ØªÙ…ÙƒÙŠÙ† "Ø§Ù„ØªÙˆØ±Ø·" Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ³ØªØ®Ø¯Ù… PyTorch >= 2.0 Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§Ù†ØªØ¨Ø§Ù‡ Ø¥Ù„Ù‰ Ù†Ù‚Ø·Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ (SDPA) ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§:

Ù‡Ø°Ø§ Ù‡Ùˆ Ù†ÙØ³Ù‡ Ø¹Ù†Ø¯ ØªØ¹ÙŠÙŠÙ† Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… ØµØ±Ø§Ø­Ø© Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ~models.attention_processor.AttnAddedKVProcessor2_0:

Ù‚Ù… Ø¨Ø¥Ù„ØºØ§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¥Ù„Ù‰ ÙˆØ­Ø¯Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ~KandinskyPriorPipeline.enable_model_cpu_offload Ù„ØªØ¬Ù†Ø¨ Ø£Ø®Ø·Ø§Ø¡ Ù†ÙØ§Ø¯ Ø§Ù„Ø°Ø§ÙƒØ±Ø©:

4. ÙŠØ³ØªØ®Ø¯Ù… Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø©ØŒ Ø¨Ø´ÙƒÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠØŒ DDIMSchedulerØŒ ÙˆÙ„ÙƒÙ† ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ Ø¨Ù…Ø®Ø·Ø· Ø¢Ø®Ø± Ù…Ø«Ù„ DDPMScheduler Ù„Ù…Ø¹Ø±ÙØ© ÙƒÙŠÙÙŠØ© ØªØ£Ø«ÙŠØ± Ø°Ù„Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‚Ø§ÙŠØ¶Ø© Ø¨ÙŠÙ† Ø³Ø±Ø¹Ø© Ø§Ù„Ø§Ø³ØªØ¯Ù„Ø§Ù„ ÙˆØ¬ÙˆØ¯Ø© Ø§Ù„ØµÙˆØ±Ø©: